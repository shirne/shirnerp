"use strict";function del(t,n){return dialog.confirm(n,function(){location.href=$(t).attr("href")}),!1}function lang(t){return window.language&&window.language[t]?window.language[t]:t}function randomString(t,n){for(var o="",i=(n=n||"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789").length,e=0;e<t;e++){var s=Math.floor(Math.random()*i);o+=n.substring(s,s+1)}return o}function copy_obj(t){return JSON.parse(JSON.stringify(t))}function isObjectValueEqual(t,n){if(!t&&!n)return!0;if(!t||!n)return!1;var o=Object.getOwnPropertyNames(t),i=Object.getOwnPropertyNames(n);if(o.length!=i.length)return!1;for(var e=0;e<o.length;e++){var s=o[e];if(t[s]!==n[s])return!1}return!0}function array_combine(t,n){for(var o={},i=0;i<t.length&&!(n.length<i+1);i++)o[t[i]]=n[i];return o}function tostring(t){return t&&t.toString?t.toString():""}function callfunc(t,n,o,i){if(o){"string"==typeof o&&(o=o.split(","));var e=o.indexOf("###");0<=e?o[e]=t:o=[t].concat(o)}else o=[t];return window[n]?window[n].apply(i,o):null==t?"":t}function iif(t,n,o){return"0"===t&&(t=0),t?n:o}Number.prototype.format=function(t){void 0===t&&(t=2);for(var n=this.toFixed(t).split("."),o=[],i=n[0].split(""),e=i.length,s=0;s<e;s++)0<s&&s%3==0&&o.unshift(","),o.unshift(i[e-s-1]);return o.join("")+(2==n.length?"."+n[1]:"")},String.prototype.trim||(String.prototype.trim=function(){return this.replace(/(^\s+|\s+$)/g,"")}),String.prototype.compile=function(r,t){if(t){var n=[];for(var o in r)n.push(this.compile(r[o]));return n.join("\n")}return this.replace(/\{if\s+([^\}]+)\}([\W\w]*){\/if}/g,function(t,n,o){var i;if(i=n.match(/\s+(=+|<|>)\s+/)){i=i[0];var e=n.split(i);0===e[0].indexOf("@")&&(e[0]=r[e[0].replace("@","")]),0===e[1].indexOf("@")&&(e[1]=r[e[1].replace("@","")]);var s=!1;switch(i=i.trim()){case"==":s=e[0]==e[1];break;case"===":s=e[0]===e[1];break;case">":s=e[0]>e[1];break;case"<":s=e[0]<e[1]}if(s)return o}else if(r[n.replace("@","")])return o;return""}).replace(/\{@([\w\d\.]+)(?:\|([\w\d]+)(?:\s*=\s*([^\}]+))?)?\}/g,function(t,n,o,i){if(0<n.indexOf(".")){for(var e=n.split("."),s=r,a=0;a<e.length;a++){if(void 0===s[e[a]]||null===s[e[a]]){s="";break}s=s[e[a]]}return callfunc(s,o,i)}return callfunc(r[n],o,i,r)})},window.default=function(t,n){return t||n},function(t,b){var r='<div class="modal fade" id="{@id}" tabindex="-1" role="dialog" aria-labelledby="{@id}Label" aria-hidden="true">\n    <div class="modal-dialog">\n        <div class="modal-content">\n            <div class="modal-header">\n                <h4 class="modal-title" id="{@id}Label"></h4>\n                <button type="button" class="close" data-dismiss="modal">\n                    <span aria-hidden="true">&times;</span>\n                    <span class="sr-only">Close</span>\n                </button>\n            </div>\n            <div class="modal-body">\n            </div>\n            <div class="modal-footer">\n                <nav class="nav nav-fill"></nav>\n            </div>\n        </div>\n    </div>\n</div>',o=0;function v(t){if(t||(t={}),t.btns){if("string"==typeof t.btns)t.btns=[{text:t.btns}];else if(t.btns instanceof Array)for(var n=0;n<t.btns.length;n++)"string"==typeof t.btns[n]&&(t.btns[n]={text:t.btns[n]}),t.btns[n].isdefault&&(t.defaultBtn=n);else console.error("Dialog::construct argument btns error."),t.btns=[];0<t.btns.length&&(void 0===t.defaultBtn&&(t.defaultBtn=t.btns.length-1,t.btns[t.defaultBtn].isdefault=!0),t.btns[t.defaultBtn]&&!t.btns[t.defaultBtn].type&&(t.btns[t.defaultBtn].type="primary"))}this.options=b.extend({id:"modal_dialog_"+o++,header:!0,footer:!0,backdrop:!0,size:"",btns:[{text:"取消",type:"secondary"},{text:"确定",isdefault:!0,type:"primary"}],defaultBtn:1,contentClass:"",onsure:null,onshow:null,onshown:null,onhide:null,onhidden:null},t),(!this.options.btns||this.options.btns.length<1)&&(this.options.footer=!1),this.closed=!0,this.box=b(this.options.id)}v.prototype.generBtn=function(t,n){return t.type&&(t.class="btn-outline-"+t.type),'<a href="javascript:" class="nav-item btn '+(t.class?t.class:"btn-outline-secondary")+'" data-index="'+n+'">'+t.text+"</a>"},v.prototype.show=function(t,n){this.box=b("#"+this.options.id),n||(n="系统提示"),this.box.length<1?(b(document.body).append(r.replace("modal-body","modal-body"+(this.options.bodyClass?" "+this.options.bodyClass:"")).compile({id:this.options.id})),this.box=b("#"+this.options.id)):this.box.unbind(),this.options.header||this.box.find(".modal-header").remove(),this.options.footer||this.box.find(".modal-footer").remove(),!0!==this.options.backdrop&&(this.box.data("backdrop",this.options.backdrop),!1===this.options.backdrop&&this.box.css({height:0,overflow:"visible"})),this.options.keyboard||this.box.data("keyboard",!1);var o=this;v.instance=o;for(var i=[],e=0;e<this.options.btns.length;e++)i.push(this.generBtn(this.options.btns[e],e));this.box.find(".modal-footer .nav").html(i.join("\n"));var s=this.box.find(".modal-dialog");s.removeClass("modal-sm").removeClass("modal-lg"),"sm"==this.options.size?s.addClass("modal-sm"):"lg"==this.options.size&&s.addClass("modal-lg"),this.options.contentClass&&s.find(".modal-content").addClass(this.options.contentClass),this.box.find(".modal-title").text(n);var a=this.box.find(".modal-body");return a.html(t),this.box.on("hide.bs.modal",function(){o.options.onhide&&o.options.onhide(a,o.box),v.instance=null}),this.box.on("hidden.bs.modal",function(){o.options.onhidden&&o.options.onhidden(a,o.box),o.closed=!0,o.box.remove(),o.box=null}),this.box.on("show.bs.modal",function(){o.options.onshow&&o.options.onshow(a,o.box)}),this.box.on("shown.bs.modal",function(){o.options.onshown&&o.options.onshown(a,o.box)}),this.options.footer&&this.box.find(".modal-footer .btn").click(function(){var t=!0,n=b(this).data("index");o.options.btns[n].click&&(t=o.options.btns[n].click.apply(this,[a,o.box])),n==o.options.defaultBtn&&o.options.onsure&&(t=o.options.onsure.apply(this,[a,o.box])),!1!==t&&o.box.modal("hide")}),this.closed=!1,this.box.modal("show"),this},v.prototype.hide=v.prototype.close=function(){return this.box&&!this.closed&&(this.closed=!0,this.box.modal("hide")),this};var i={error:function(t,n){return this.message(t,"error",n)},success:function(t,n){return this.message(t,"success",n)},warning:function(t,n){return this.message(t,"warning",n)},info:function(t,n){return this.message(t,"info",n)},message:function(t,n,o){var i="bg-info text-white",e="information-circle";if(n)switch(n){case"danger":case"error":e="close-circle",i="bg-danger text-white";break;case"warning":e="warning",i="bg-warning text-white";break;case"success":e="checkmark-circle",i="bg-success text-white"}var s='<div class="dialog-message" ><i class="ion-md-'+e+'"></i>&nbsp;&nbsp;'+t+'<a href="javascript:" class="ion-md-close closebtn"></a></div>',a=new v({footer:!1,header:!1,backdrop:!1,size:"sm",contentClass:i,onshow:function(t){t.find(".closebtn").click(function(){a.close()})}}).show(s,"");return o||(o=2),setTimeout(function(){a.close()},1e3*o),a},alert:function(t,n,o){var i=!1,e="function"==typeof n,s="",a="sm",r="";if(void 0===n||e||(o=n),b.isPlainObject(t)){if(t.title&&(s=t.title),void 0!==t.size&&(a=t.size),void 0===t.content)throw"message.content can not be empty.";t=t.content}var l={success:"checkmark-circle",info:"information-circle",warning:"alert",error:"remove-circle"},c="primary";return void 0===o?o="information-circle":l[o]&&(c="error"==o?"danger":o,o=l[o]),r=o?'<div class="row" style="align-items: center;"><div class="col-3 text-right"><i class="ion-md-{@icon} text-{@color}" style="font-size:3em;"></i> </div><div class="col-9" >{@message}</div> </div>'.compile({message:t,icon:o,color:c}):t,new v({btns:"确定",size:a,header:!!s,onsure:function(){if(e)return n(i=!0)},onhide:function(){!i&&e&&n(!1)}}).show(r,s)},confirm:function(t,n,o,i,e){var s=!1;"function"!=typeof n?(i=n,"function"==typeof o?(n=o,o=null):e=o):"function"!=typeof o&&(e=i,i=o),"number"==typeof i&&(e=i,i=void 0);var a="",r="sm",l=[{text:"取消",type:"secondary"},{text:"确定",isdefault:!0,type:"primary"}];if(b.isPlainObject(t)){if(t.title&&(a=t.title),void 0!==t.size&&(r=t.size),void 0!==t.btns&&(l=t.btns),void 0===t.content)throw"message.content can not be empty.";t=t.content}var c={success:"checkmark-circle",info:"information-circle",warning:"alert",error:"remove-circle"},d="primary";i?c[i]&&(d="error"===i?"danger":i,i=c[i]):i="information-circle";var u='<div class="row" style="align-items: center;"><div class="col-3 text-right"><i class="ion-md-{@icon} text-{@color}" style="font-size:3em;"></i> </div><div class="col-9" >{@message}</div> </div>'.compile({message:t,icon:i,color:d}),f=0,p=new v({header:!!a,btns:l,size:r,backdrop:"static",onsure:function(){if(n&&"function"==typeof n)return s=!0,n()},onhide:function(){if(clearInterval(f),!1===s&&"function"==typeof o)return o()}}).show(u,a);if(e&&"number"==typeof e){var h=p.box.find(".modal-footer .btn-outline-primary"),m=p.options.btns[p.options.defaultBtn].text;h.addClass("disabled").text(m+"("+e+")"),f=setInterval(function(){0<--e?h.text(m+"("+e+")"):(h.text(m),h.removeClass("disabled"),clearInterval(f))},1e3)}return p},prompt:function(n,i,t){var e=!1,o='<div class="form-group">{@input}</div>',s="请输入信息",a="";return"string"==typeof n?s=n:(s=n.title,n.content&&(o=-1<n.content.indexOf("{@input}")?n.content:n.content+o),n.default&&(a=n.default)),new v({backdrop:"static",onshow:function(t){n&&n.onshow&&n.onshow(t)},onshown:function(t){t.find("[name=confirm_input]").focus().val(a),n&&n.onshown&&n.onshown(t)},onsure:function(t){var n=t.find("[name=confirm_input]").val();if("function"==typeof i){var o=i(n);return!0===o&&(e=!0),o}},onhide:function(){if(0==e&&"function"==typeof t)return t()}}).show(o.compile({input:'<input type="text" name="confirm_input" class="form-control" />'}),s)},action:function(t,o,n){var i='<div class="list-group"><a href="javascript:" class="list-group-item list-group-item-action">'+t.join('</a><a href="javascript:" class="list-group-item list-group-item-action">')+"</a></div>",e=null,s=new v({bodyClass:"modal-action",backdrop:"static",size:"sm",btns:[{text:"取消",type:"secondary"}],onshow:function(t){(e=t.find(".list-group-item-action")).click(function(t){e.removeClass("active"),b(this).addClass("active");var n=e.index(this);"function"==typeof o?!1!==o(n)&&s.close():s.close()})},onsure:function(t){return!0},onhide:function(){return!0}}).show(i,n||"请选择")},pickList:function(a,n,r){"string"==typeof a&&(a={url:a}),a=b.extend({url:"",name:"对象",searchHolder:"根据名称搜索",idkey:"id",onRow:null,extend:null,rowTemplate:'<a href="javascript:" data-id="{@id}" class="list-group-item list-group-item-action">[{@id}]&nbsp;<i class="ion-md-person"></i> {@username}&nbsp;&nbsp;&nbsp;<small><i class="ion-md-phone-portrait"></i> {@mobile}</small></a>'},a||{});var l=null,t="";a.extend&&(t='<select name="'+a.extend.name+'" class="form-control"><option value="">'+a.extend.title+"</option></select>"),r||(r={});new v({backdrop:"static",onshown:function(t){var n=t.find(".searchbtn"),o=t.find(".searchtext"),i=t.find(".list-group"),e=!1,s=null;a.extend&&(s=t.find("[name="+a.extend.name+"]"),b.ajax({url:a.extend.url,type:"GET",dataType:"JSON",success:function(t){s.append(a.extend.htmlRow.compile(t.data,!0))}})),n.click(function(){e||(e=!0,i.html('<span class="list-loading">加载中...</span>'),r.key=o.val(),a.extend&&(r[a.extend.name]=s.val()),b.ajax({url:a.url,type:"GET",dataType:"JSON",data:r,success:function(o){e=!1,1===o.code?o.data&&o.data.length?(i.html(a.rowTemplate.compile(o.data,!0)),i.find("a.list-group-item").click(function(){for(var t=b(this).data("id"),n=0;n<o.data.length;n++)if(o.data[n][a.idkey]==t){l=o.data[n],i.find("a.list-group-item").removeClass("active"),b(this).addClass("active");break}})):i.html('<span class="list-loading"><i class="ion-md-warning"></i> 没有检索到'+a.name+"</span>"):i.html('<span class="text-danger"><i class="ion-md-warning"></i> 加载失败</span>')}}))}).trigger("click")},onsure:function(t){return l?"function"==typeof n?n(l):void 0:(i.warning("没有选择"+a.name+"!"),!1)}}).show('<div class="input-group">'+t+'<input type="text" class="form-control searchtext" name="keyword" placeholder="'+a.searchHolder+'"/><div class="input-group-append"><a class="btn btn-outline-secondary searchbtn"><i class="ion-md-search"></i></a></div></div><div class="list-group list-group-picker mt-2"></div>',"请搜索并选择"+a.name)}};b(document).on("keydown",function(t){if(v.instance){var n=v.instance;13==t.keyCode&&n.box.find(".modal-footer .btn").eq(n.options.defaultBtn).trigger("click")}}),t.Dialog=b.Dialog=v,t.dialog=b.dialog=i}(window,jQuery||Zepto);
//# sourceMappingURL=label.min.js.map
