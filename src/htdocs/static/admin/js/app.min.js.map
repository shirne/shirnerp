{"version":3,"sources":["common.js","template.js","datetime.init.js","backend.js","dialog.js","jquery.tag.js","map.js"],"names":["del","obj","msg","dialog","confirm","location","href","$","attr","lang","key","window","language","randomString","len","charSet","str","allLen","length","i","randomPoz","Math","floor","random","substring","copy_obj","arr","JSON","parse","stringify","isObjectValueEqual","a","b","aProps","Object","getOwnPropertyNames","bProps","propName","array_combine","tostring","toString","callfunc","val","func","args","thisobj","argidx","split","indexOf","concat","apply","html_encode","html","undefined","temp","document","createElement","textContent","innerText","output","innerHTML","html_decode","text","pad_zero","n","c","Array","join","timestamp_date","timestamp","fmt","jsdate","Date","txt_weekdays","txt_ordin","1","2","3","21","22","23","31","txt_months","f","d","j","D","l","substr","getDate","w","N","S","getDay","z","getFullYear","W","L","nd","nd2","round","getTime","F","m","M","getMonth","t","y","Y","slice","getHours","A","toUpperCase","B","off","getTimezoneOffset","theSeconds","getMinutes","getSeconds","beat","String","g","G","h","H","s","O","abs","P","U","replace","iif","v","m1","m2","transOption","tooltips","radio_tab","radios","lists","prefix","on","e","curval","this","is","hide","show","filter","trigger","bindData","body","data","find","getData","fields","eq","closeThisPage","curkey","frameElement","top","closePage","updateThisTitle","title","updatePage","refreshFromPage","Number","prototype","format","fix","toFixed","unshift","trim","compile","list","temps","push","all","condition","cont","conts","operation","match","part","result","keys","dialogTpl","dialogIdx","format_btn","btn","isdefault","_typeof","type","Dialog","opts","btns","console","error","options","extend","id","header","footer","backdrop","tabindex","size","contentClass","onsure","onshow","onshown","onhide","onhidden","btncount","addbtn","splice","addbtns","closed","box","generBtn","opt","idx","getDefaultBtn","append","bodyClass","unbind","remove","css","height","overflow","keyboard","self","instance","modal","click","close","message","time","success","warning","info","loading","cssClass","icon","dlg","setTimeout","alert","callback","called","iscallback","isPlainObject","iconMap","color","cancel","countdown","btnText","inteval","clearInterval","addClass","setInterval","removeClass","prompt","contentHtml","is_multi","is_textarea","multiset","dftValue","content","multi","default","inputHtml","label","value","sub_is_textarea","firstInput","select","inputs","each","input","action","actions","index","pickList","config","url","call","isajax","name","searchHolder","idkey","titlekey","onRow","rowTemplate","current","exthtml","contentTpl","extField","listbox","isloading","htmlRow","ajax","dataType","json","code","pickUser","get_search_url","pickArticle","get_cate_url","pickProduct","titletpl","pickLocate","locate","settedLocate","mapbox","mapinfo","map","InitMap","address","lng","lat","search","setLocate","showAtCenter","keyCode","currentModal","jQuery","Zepto","fn","tags","nm","onupdate","tpl","item","parents","labelgroup","before","updated","vals","tag","focus","datetimepicker","option","newopt","today","clear","selectMonth","prevMonth","nextMonth","selectYear","prevYear","nextYear","selectDecade","selectTime","prevDecade","nextDecade","prevCentury","nextCentury","locale","showClear","showTodayButton","showClose","keepInvalid","from","to","minDate","maxDate","mapObj","mapBox","onPick","apis","baidu","google","tencent","gaode","BaseMap","mapkey","mapType","ishide","isshow","toshow","marker","infoWindow","BaiduMap","GoogleMap","infoOpts","width","TencentMap","GaodeMap","isAPIReady","pointToObject","objectToPoint","setMap","showInfo","getCenter","getAddress","rs","loadAPI","src","apiurl","script","appendChild","setInfoContent","addr","setTitle","setContent","center","showLocationInfo","pt","constructor","point","gc","BMap","Map","addControl","NavigationControl","ScaleControl","OverviewMapControl","enableScrollWheelZoom","centerAndZoom","Marker","enableDragging","Geocoder","addEventListener","getLocation","addOverlay","InfoWindow","object","Point","parseFloat","panTo","openInfoWindow","addComp","addressComponents","province","city","district","street","streetNumber","myGeo","getPoint","setPosition","maps","zoom","draggable","scaleControl","streetViewControl","zoomControl","position","addListener","getPosition","geocode","LatLng","setOptions","status","formatted_address","getLng","getLat","qq","align","ALIGN","BOTTOM_LEFT","margin","Size","setAnimation","MarkerAnimation","DOWN","complete","event","open","detail","setCenter","AMap","resizeEnable","dragEnable","plugin","ToolBar","Scale","OverView","setLang","setDraggable","lnglat","st","LngLat","regeocode","formattedAddress","maptype","toLowerCase","loc","stop_ajax","excelTpl","importExcel","sheets","file","importResult","sheet","xhr","FormData","cache","processData","contentType","ajaxSettings","upload","loaded","total","change","errors","reload","bread","menu","link","topmenu","target","ids","prop","checked","preventDefault","letter","needChecks","idchecks","parent","totext","toggleClass","tooltip","dlgbox","beforeSend","request","setRequestHeader","pagecontent","stopPropagation","tab","inputgroup","is_img","figure","img","origurl","figcap","files","URL","createObjectURL","form","isbtn","origText","removeAttr","percent","serialize","group","idele","infoele","user","username","mobile"],"mappings":"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","file":"app.min.js","sourcesContent":["function del(obj,msg) {\r\n    dialog.confirm(msg,function(){\r\n        location.href=$(obj).attr('href');\r\n    });\r\n    return false;\r\n}\r\n\r\nfunction lang(key) {\r\n    if(window.language && window.language[key]){\r\n        return window.language[key];\r\n    }\r\n    return key;\r\n}\r\n\r\nfunction randomString(len, charSet) {\r\n    charSet = charSet || 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\r\n    var str = '',allLen=charSet.length;\r\n    for (var i = 0; i < len; i++) {\r\n        var randomPoz = Math.floor(Math.random() * allLen);\r\n        str += charSet.substring(randomPoz,randomPoz+1);\r\n    }\r\n    return str;\r\n}\r\n\r\nfunction copy_obj(arr){\r\n    return JSON.parse(JSON.stringify(arr));\r\n}\r\n\r\nfunction isObjectValueEqual(a, b) {\r\n    if(!a && !b)return true;\r\n    if(!a || !b)return false;\r\n\r\n    // Of course, we can do it use for in\r\n    // Create arrays of property names\r\n    var aProps = Object.getOwnPropertyNames(a);\r\n    var bProps = Object.getOwnPropertyNames(b);\r\n\r\n    // If number of properties is different,\r\n    // objects are not equivalent\r\n    if (aProps.length != bProps.length) {\r\n        return false;\r\n    }\r\n\r\n    for (var i = 0; i < aProps.length; i++) {\r\n        var propName = aProps[i];\r\n\r\n        // If values of same property are not equal,\r\n        // objects are not equivalent\r\n        if (a[propName] !== b[propName]) {\r\n            return false;\r\n        }\r\n    }\r\n\r\n    // If we made it this far, objects\r\n    // are considered equivalent\r\n    return true;\r\n}\r\n\r\nfunction array_combine(a,b) {\r\n    var obj={};\r\n    for(var i=0;i<a.length;i++){\r\n        if(b.length<i+1)break;\r\n        obj[a[i]]=b[i];\r\n    }\r\n    return obj;\r\n}","\r\nNumber.prototype.format=function(fix){\r\n    if(fix===undefined)fix=2;\r\n    var num=this.toFixed(fix);\r\n    var z=num.split('.');\r\n    var format=[],f=z[0].split(''),l=f.length;\r\n    for(var i=0;i<l;i++){\r\n        if(i>0 && i % 3==0){\r\n            format.unshift(',');\r\n        }\r\n        format.unshift(f[l-i-1]);\r\n    }\r\n    return format.join('')+(z.length==2?'.'+z[1]:'');\r\n};\r\nif(!String.prototype.trim){\r\n    String.prototype.trim=function () {\r\n        return this.replace(/(^\\s+|\\s+$)/g,'');\r\n    }\r\n}\r\nString.prototype.compile=function(data,list){\r\n\r\n    if(list){\r\n        var temps=[];\r\n        for(var i in data){\r\n            temps.push(this.compile(data[i]));\r\n        }\r\n        return temps.join(\"\\n\");\r\n    }else{\r\n        return this.replace(/\\{if\\s+([^\\}]+)\\}([\\W\\w]*?){\\/if}/g,function(all, condition, cont){\r\n            var operation;\r\n            var conts=cont.split('{else}');\r\n            if(operation=condition.match(/\\s+(=+|<|>)\\s+/)){\r\n                operation=operation[0];\r\n                var part=condition.split(operation);\r\n                if(part[0].indexOf('@')===0){\r\n                    part[0]=data[part[0].replace('@','')];\r\n                }\r\n                if(part[1].indexOf('@')===0){\r\n                    part[1]=data[part[1].replace('@','')];\r\n                }\r\n                operation=operation.trim();\r\n                var result=false;\r\n                switch (operation){\r\n                    case '==':\r\n                        result = part[0] == part[1];\r\n                        break;\r\n                    case '===':\r\n                        result = part[0] === part[1];\r\n                        break;\r\n                    case '>':\r\n                        result = part[0] > part[1];\r\n                        break;\r\n                    case '<':\r\n                        result = part[0] < part[1];\r\n                        break;\r\n                }\r\n                if(result){\r\n                    return cont;\r\n                }else if(conts[1]){\r\n                    return conts[1];\r\n                }\r\n            }else {\r\n                if (data[condition.replace('@','')]) return conts[0];\r\n                else if(conts[1]) return conts[1];\r\n            }\r\n            return '';\r\n        }).replace(/\\{@([\\w\\d\\.]+)(?:\\|([\\w\\d]+)(?:\\s*=\\s*([^\\}]+))?)?\\}/g,function(all,m1,func,args){\r\n\r\n            if(m1.indexOf('.')>0){\r\n                var keys=m1.split('.'),val=data;\r\n                for(var i=0;i<keys.length;i++){\r\n                    if(val[keys[i]]!==undefined && val[keys[i]]!==null){\r\n                        val=val[keys[i]];\r\n                    }else{\r\n                        val = '';\r\n                        break;\r\n                    }\r\n                }\r\n                return callfunc(val,func,args);\r\n            }else{\r\n                return callfunc(data[m1],func,args,data);\r\n            }\r\n        });\r\n    }\r\n};\r\n\r\nfunction tostring(obj) {\r\n    if(obj && obj.toString){\r\n        return obj.toString();\r\n    }\r\n    return '';\r\n}\r\n\r\nfunction callfunc(val,func,args,thisobj){\r\n    if(!args){\r\n        args=[val];\r\n    }else{\r\n        if(typeof args==='string')args=args.split(',');\r\n        var argidx=args.indexOf('###');\r\n        if(argidx>=0){\r\n            args[argidx]=val;\r\n        }else{\r\n            args=[val].concat(args);\r\n        }\r\n    }\r\n\r\n    return window[func]?window[func].apply(thisobj,args):((val===undefined||val===null)?'':val);\r\n}\r\n\r\n\r\nfunction html_encode(html){\r\n    if(!html)return html;\r\n    var temp = document.createElement (\"div\");\r\n    (temp.textContent != undefined ) ? (temp.textContent = html) : (temp.innerText = html);\r\n    var output = temp.innerHTML;\r\n    temp = null;\r\n    return output;\r\n}\r\nfunction html_decode(text){\r\n    if(!text)return text;\r\n    var temp = document.createElement(\"div\");\r\n    temp.innerHTML = text;\r\n    var output = temp.innerText || temp.textContent;\r\n    temp = null;\r\n    return output;\r\n}\r\n\r\nfunction pad_zero(n, c){\r\n    if ((n = n + \"\").length < c) {\r\n        return new Array(++c - n.length).join(\"0\") + n;\r\n    } else {\r\n        return n;\r\n    }\r\n}\r\n\r\nfunction timestamp_date(timestamp, fmt){\r\n    if(!timestamp)return '';\r\n    var jsdate=new Date(timestamp*1000);\r\n    if(!fmt)fmt = 'Y-m-d H:i:s';\r\n\r\n    var txt_weekdays = [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"];\r\n    var txt_ordin = {\r\n        1: \"st\",\r\n        2: \"nd\",\r\n        3: \"rd\",\r\n        21: \"st\",\r\n        22: \"nd\",\r\n        23: \"rd\",\r\n        31: \"st\"\r\n    };\r\n    var txt_months = [\"\", \"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"];\r\n    var f = {\r\n        // Day \r\n        d: function () {\r\n            return pad_zero(f.j(), 2)\r\n        },\r\n        D: function () {\r\n            return f.l().substr(0, 3)\r\n        },\r\n        j: function () {\r\n            return jsdate.getDate()\r\n        },\r\n        l: function () {\r\n            return txt_weekdays[f.w()]\r\n        },\r\n        N: function () {\r\n            return f.w() + 1\r\n        },\r\n        S: function () {\r\n            return txt_ordin[f.j()] ? txt_ordin[f.j()] : 'th'\r\n        },\r\n        w: function () {\r\n            return jsdate.getDay()\r\n        },\r\n        z: function () {\r\n            return (jsdate - new Date(jsdate.getFullYear() + \"/1/1\")) / 864e5 >> 0\r\n        },\r\n\r\n        // Week \r\n        W: function () {\r\n            var a = f.z(),\r\n                b = 364 + f.L() - a;\r\n            var nd2, nd = (new Date(jsdate.getFullYear() + \"/1/1\").getDay() || 7) - 1;\r\n            if (b <= 2 && ((jsdate.getDay() || 7) - 1) <= 2 - b) {\r\n                return 1;\r\n            } else {\r\n                if (a <= 2 && nd >= 4 && a >= (6 - nd)) {\r\n                    nd2 = new Date(jsdate.getFullYear() - 1 + \"/12/31\");\r\n                    return timestamp_date(Math.round(nd2.getTime() / 1000),\"W\");\r\n                } else {\r\n                    return (1 + (nd <= 3 ? ((a + nd) / 7) : (a - (7 - nd)) / 7) >> 0);\r\n                }\r\n            }\r\n        },\r\n\r\n        // Month \r\n        F: function () {\r\n            return txt_months[f.n()]\r\n        },\r\n        m: function () {\r\n            return pad_zero(f.n(), 2)\r\n        },\r\n        M: function () {\r\n            return f.F().substr(0, 3)\r\n        },\r\n        n: function () {\r\n            return jsdate.getMonth() + 1\r\n        },\r\n        t: function () {\r\n            var n;\r\n            if ((n = jsdate.getMonth() + 1) == 2) {\r\n                return 28 + f.L();\r\n            } else {\r\n                if (n & 1 && n < 8 || !(n & 1) && n > 7) {\r\n                    return 31;\r\n                } else {\r\n                    return 30;\r\n                }\r\n            }\r\n        },\r\n\r\n        // Year \r\n        L: function () {\r\n            var y = f.Y();\r\n            return (!(y & 3) && (y % 1e2 || !(y % 4e2))) ? 1 : 0\r\n        },\r\n        //o not supported yet \r\n        Y: function () {\r\n            return jsdate.getFullYear()\r\n        },\r\n        y: function () {\r\n            return (jsdate.getFullYear() + \"\").slice(2)\r\n        },\r\n\r\n        // Time \r\n        a: function () {\r\n            return jsdate.getHours() > 11 ? \"pm\" : \"am\"\r\n        },\r\n        A: function () {\r\n            return f.a().toUpperCase()\r\n        },\r\n        B: function () {\r\n            // peter paul koch: \r\n            var off = (jsdate.getTimezoneOffset() + 60) * 60;\r\n            var theSeconds = (jsdate.getHours() * 3600) + (jsdate.getMinutes() * 60) + jsdate.getSeconds() + off;\r\n            var beat = Math.floor(theSeconds / 86.4);\r\n            if (beat > 1000) beat -= 1000;\r\n            if (beat < 0) beat += 1000;\r\n            if ((String(beat)).length == 1) beat = \"00\" + beat;\r\n            if ((String(beat)).length == 2) beat = \"0\" + beat;\r\n            return beat;\r\n        },\r\n        g: function () {\r\n            return jsdate.getHours() % 12 || 12\r\n        },\r\n        G: function () {\r\n            return jsdate.getHours()\r\n        },\r\n        h: function () {\r\n            return pad_zero(f.g(), 2)\r\n        },\r\n        H: function () {\r\n            return pad_zero(jsdate.getHours(), 2)\r\n        },\r\n        i: function () {\r\n            return pad_zero(jsdate.getMinutes(), 2)\r\n        },\r\n        s: function () {\r\n            return pad_zero(jsdate.getSeconds(), 2)\r\n        },\r\n        //u not supported yet \r\n\r\n        // Timezone \r\n        //e not supported yet \r\n        //I not supported yet \r\n        O: function () {\r\n            var t = pad_zero(Math.abs(jsdate.getTimezoneOffset() / 60 * 100), 4);\r\n            if (jsdate.getTimezoneOffset() > 0) t = \"-\" + t;\r\n            else t = \"+\" + t;\r\n            return t;\r\n        },\r\n        P: function () {\r\n            var O = f.O();\r\n            return (O.substr(0, 3) + \":\" + O.substr(3, 2))\r\n        },\r\n        //T not supported yet \r\n        //Z not supported yet \r\n\r\n        // Full Date/Time \r\n        c: function () {\r\n            return f.Y() + \"-\" + f.m() + \"-\" + f.d() + \"T\" + f.h() + \":\" + f.i() + \":\" + f.s() + f.P()\r\n        },\r\n        //r not supported yet \r\n        U: function () {\r\n            return Math.round(jsdate.getTime() / 1000)\r\n        }\r\n    };\r\n\r\n    return fmt.replace(/[\\\\]?([a-zA-Z])/g, function (t, s) {\r\n        var ret = '';\r\n        if (t != s) {\r\n            // escaped \r\n            ret = s;\r\n        } else if (f[s]) {\r\n            // a date function exists \r\n            ret = f[s]();\r\n        } else {\r\n            // nothing special \r\n            ret = s;\r\n        }\r\n        return ret;\r\n    });\r\n}\r\n\r\nfunction iif(v,m1,m2){\r\n    if(v==='0')v=0;\r\n    return v?m1:m2;\r\n}\r\n\r\nwindow['default']=function (v,d) {\r\n    return v?v:d;\r\n};","//日期组件\r\nif($.fn.datetimepicker) {\r\n    var tooltips= {\r\n        today: '定位当前日期',\r\n        clear: '清除已选日期',\r\n        close: '关闭选择器',\r\n        selectMonth: '选择月份',\r\n        prevMonth: '上个月',\r\n        nextMonth: '下个月',\r\n        selectYear: '选择年份',\r\n        prevYear: '上一年',\r\n        nextYear: '下一年',\r\n        selectDecade: '选择年份区间',\r\n        selectTime:'选择时间',\r\n        prevDecade: '上一区间',\r\n        nextDecade: '下一区间',\r\n        prevCentury: '上个世纪',\r\n        nextCentury: '下个世纪'\r\n    };\r\n\r\n    function transOption(option) {\r\n        if(!option)return {};\r\n        var newopt={};\r\n        for(var i in option){\r\n            switch (i){\r\n                case 'viewmode':\r\n                    newopt['viewMode']=option[i];\r\n                    break;\r\n                case 'keepopen':\r\n                    newopt['keepOpen']=option[i];\r\n                    break;\r\n                default:\r\n                    newopt[i]=option[i];\r\n            }\r\n        }\r\n        return newopt;\r\n    }\r\n    $('.datepicker').each(function(){\r\n        var config=$.extend({\r\n            tooltips:tooltips,\r\n            format: 'YYYY-MM-DD',\r\n            locale: 'zh-cn',\r\n            showClear:true,\r\n            showTodayButton:true,\r\n            showClose:true,\r\n            keepInvalid:true\r\n        },transOption($(this).data()));\r\n\r\n        $(this).datetimepicker(config);\r\n    });\r\n\r\n    $('.date-range').each(function () {\r\n        var from = $(this).find('[name=fromdate],.fromdate'), to = $(this).find('[name=todate],.todate');\r\n        var options = $.extend({\r\n            tooltips:tooltips,\r\n            format: 'YYYY-MM-DD',\r\n            locale:'zh-cn',\r\n            showClear:true,\r\n            showTodayButton:true,\r\n            showClose:true,\r\n            keepInvalid:true\r\n        },$(this).data());\r\n        from.datetimepicker(options).on('dp.change', function () {\r\n            if (from.val()) {\r\n                to.data('DateTimePicker').minDate(from.val());\r\n            }\r\n        });\r\n        to.datetimepicker(options).on('dp.change', function () {\r\n            if (to.val()) {\r\n                from.data('DateTimePicker').maxDate(to.val());\r\n            }\r\n        });\r\n    });\r\n}","window.stop_ajax=false;\r\n\r\nfunction radio_tab(radios,lists,prefix) {\r\n    $(radios).on('change',function (e) {\r\n        if(!$(this).is(':checked'))return;\r\n        var curval=$(this).val();\r\n        $(lists).hide();\r\n        $('.'+prefix+curval).show();\r\n    }).filter(':checked').trigger('change');\r\n}\r\n\r\n//绑定数据\r\nfunction bindData(body,data) {\r\n    for(var i in data){\r\n        body.find('[name='+i+']').val(data[i]);\r\n    }\r\n}\r\n\r\n//获取表单数据\r\nfunction getData(body) {\r\n    var data={};\r\n    var fields=body.find('[name]');\r\n    for(var i=0;i<fields.length;i++){\r\n        data[fields.eq(i).attr('name')]=fields.eq(i).val();\r\n    }\r\n    return data;\r\n}\r\n\r\nfunction closeThisPage() {\r\n    if(window.frameElement && top.closePage){\r\n        var curkey = $(window.frameElement).data('key');\r\n        top.closePage(curkey);\r\n    }\r\n}\r\nfunction updateThisTitle(title){\r\n    if(window.frameElement && top.updatePage){\r\n        var curkey = $(window.frameElement).data('key');\r\n        top.updatePage(curkey,title);\r\n    }\r\n}\r\nfunction refreshFromPage(){\r\n    if(window.frameElement && top.refreshFromPage){\r\n        var curkey = $(window.frameElement).data('key');\r\n        top.refreshFromPage(curkey);\r\n    }\r\n}\r\n\r\nvar excelTpl = '<form method=\"POST\" enctype=\"multipart/form-data\">' +\r\n    '<div class=\"form-group\">' +\r\n    '<div class=\"custom-file\">\\n' +\r\n    '    <input type=\"file\" class=\"custom-file-input\" name=\"uploadFile\" required>\\n' +\r\n    '    <label class=\"custom-file-label\" for=\"uploadFile\">选择文件上传</label>\\n' +\r\n    '    <div class=\"help-block text-center mt-3\"><a href=\"/static/excel.xlsx\" target=\"_blank\">示例数据</a> </div>\\n' +\r\n    '  </div>' +\r\n    '</div>' +\r\n    '</form>';\r\nfunction importExcel(title, url, callback) {\r\n    var file='',sheet='';\r\n    var dlg=new Dialog({\r\n        onshown:function (body) {\r\n            var options = {\r\n                url: url,\r\n                type: 'POST',\r\n                dataType: 'JSON',\r\n                success: function (json) {\r\n                    window.stop_ajax=false;\r\n                    //console.log(json)\r\n                    \r\n                    if (json.code == 1) {\r\n                        dlg.close();\r\n                        if(json.data.success==1){\r\n                            importResult(json,callback);\r\n                        }else{\r\n                            var sheets=json.data.sheets;\r\n                            var file = json.data.file;\r\n                            dialog.action(sheets,function (idx) {\r\n                                if(sheets[idx]){\r\n                                    $.ajax({\r\n                                        url:url,\r\n                                        data:{\r\n                                            file:file,\r\n                                            sheet:sheets[idx]\r\n                                        },\r\n                                        success:function (json) {\r\n                                            importResult(json,callback);\r\n                                        }\r\n                                    })\r\n                                }\r\n                            },'请选择要导入的表');\r\n                        }\r\n                    } else {\r\n                        dialog.warning(json.msg);\r\n                        //$(btn).removeAttr('disabled');\r\n                    }\r\n                },\r\n                error: function (xhr) {\r\n                    window.stop_ajax=false;\r\n                    //isbtn?$(btn).text(origText):$(btn).val(origText);\r\n                    //$(btn).removeAttr('disabled');\r\n                    dialog.error('服务器处理错误');\r\n                }\r\n            };\r\n            if (!FormData) {\r\n                window.stop_ajax=true;\r\n                dialog.alert('您的浏览器不支持该功能',function () {\r\n                    dlg.close();\r\n                });\r\n                return true;\r\n            }\r\n            options.cache = false;\r\n            options.processData = false;\r\n            options.contentType = false;\r\n            options.xhr= function() { //用以显示上传进度\r\n                var xhr = $.ajaxSettings.xhr();\r\n                if (xhr.upload) {\r\n                    xhr.upload.addEventListener('progress', function(event) {\r\n                        var percent = Math.floor(event.loaded / event.total * 100);\r\n                        //$(btn).text(origText+'  ('+percent+'%)');\r\n                    }, false);\r\n                }\r\n                return xhr;\r\n            };\r\n            \r\n            body.find('[name=uploadFile]').change(function (e) {\r\n                body.find('.custom-file-label').text($(this).val());\r\n                options.data = new FormData(body.find('form')[0]);\r\n                $.ajax(options);\r\n            })\r\n        },\r\n        onsure:function (body) {\r\n            \r\n            return false;\r\n        }\r\n    }).show(excelTpl,title);\r\n}\r\n\r\nfunction importResult(json,callback) {\r\n    if (json.code == 1) {\r\n        if (json.data.success == 1) {\r\n            if(callback){\r\n                callback(json.data)\r\n            }else{\r\n                var errors=json.data.errors;\r\n\r\n                if(errors && errors.length){\r\n                    if(errors.length>5){\r\n                        errors.splice(5);\r\n                        errors.push('...');\r\n                    }\r\n                    dialog.alert(json.msg+\"<br />\"+errors.join('<br />'),'warning');\r\n                }else {\r\n                    dialog.success(json.msg);\r\n                    setTimeout(function () {\r\n                        if(json.url)location.href=json.url;\r\n                        else location.reload();\r\n                    },800)\r\n                }\r\n            }\r\n        }\r\n    }else{\r\n        dialog.warning(json.msg);\r\n    }\r\n}\r\n\r\n\r\njQuery(function ($) {\r\n    //高亮当前选中的导航\r\n    var bread = $(\".breadcrumb\");\r\n    var menu = bread.data('menu');\r\n    if (menu) {\r\n        var link = top.$('.side-nav a[data-key=' + menu + ']');\r\n\r\n        var html = [];\r\n        if (link.length > 0) {\r\n            if (link.is('.menu_top')) {\r\n                html.push('<li class=\"breadcrumb-item\"><a href=\"javascript:\"><i class=\"' + link.find('i').attr('class') + '\"></i>&nbsp;' + link.text() + '</a></li>');\r\n            } else {\r\n\r\n                var topmenu = link.parents('.card').find('.card-header a.menu_top');\r\n                html.push('<li class=\"breadcrumb-item\"><a href=\"javascript:\"><i class=\"' + topmenu.find('i').attr('class') + '\"></i>&nbsp;' + topmenu.text() + '</a></li>');\r\n                html.push('<li class=\"breadcrumb-item\"><a href=\"javascript:\">' + link.text() + '</a></li>');\r\n            }\r\n        }\r\n        var title = bread.data('title');\r\n        if (title) {\r\n            html.push('<li class=\"breadcrumb-item active\" aria-current=\"page\">' + title + '</li>');\r\n        }\r\n        bread.html(html.join(\"\\n\"));\r\n    }\r\n\r\n    //全选、反选按钮\r\n    $('.checkall-btn').click(function (e) {\r\n        var target = $(this).data('target');\r\n        if (!target) target = 'id';\r\n        var ids = $('[name=' + target + ']');\r\n        if ($(this).is('.active')) {\r\n            ids.prop('checked', false);\r\n        } else {\r\n            ids.prop('checked', true);\r\n        }\r\n    });\r\n    $('.checkreverse-btn').click(function (e) {\r\n        var target = $(this).data('target');\r\n        if (!target) target = 'id';\r\n        var ids = $('[name=' + target + ']');\r\n        for (var i = 0; i < ids.length; i++) {\r\n            if (ids[i].checked) {\r\n                ids.eq(i).prop('checked', false);\r\n            } else {\r\n                ids.eq(i).prop('checked', true);\r\n            }\r\n        }\r\n    });\r\n\r\n    //全局操作按钮\r\n    $('.action-btn').click(function (e) {\r\n        e.preventDefault();\r\n        var action = $(this).data('action');\r\n        if (!action) {\r\n            return dialog.error('未知操作');\r\n        }\r\n        action = 'action' + action.replace(/^[a-z]/, function (letter) {\r\n            return letter.toUpperCase();\r\n        });\r\n        if (!window[action] || typeof window[action] !== 'function') {\r\n            return dialog.error('未知操作');\r\n        }\r\n        var needChecks = $(this).data('needchecks');\r\n        if (needChecks === undefined) needChecks = true;\r\n        if (needChecks) {\r\n            var target = $(this).data('target');\r\n            if (!target) target = 'id';\r\n            var ids = $('[name=' + target + ']:checked');\r\n            if (ids.length < 1) {\r\n                return dialog.warning('请选择需要操作的项目');\r\n            } else {\r\n                var idchecks = [];\r\n                for (var i = 0; i < ids.length; i++) {\r\n                    idchecks.push(ids.eq(i).val());\r\n                }\r\n                window[action].call(this,idchecks);\r\n            }\r\n        } else {\r\n            window[action].call(this);\r\n        }\r\n    });\r\n\r\n    //状态切换按钮\r\n    $('.chgstatus').click(function (e) {\r\n        if($(this).data('ajaxing'))return;\r\n        $(this).data('ajaxing',1);\r\n        var self=$(this);\r\n        var parent=self.parents('td');\r\n        var id=parent.data('id');\r\n        var status=self.data('status');\r\n        $.ajax({\r\n            url:parent.data('url'),\r\n            type:'POST',\r\n            dataType:'JSON',\r\n            data:{\r\n                id:id,\r\n                status:status\r\n            },\r\n            success:function (json) {\r\n                self.data('ajaxing',0);\r\n                if(json.code==1){\r\n                    dialog.success(json.msg);\r\n                    self.toggleClass('off');\r\n                    var totext=self.attr('title').replace('点击','');\r\n                    self.text(totext);\r\n                    setTimeout(function () {\r\n                        location.reload();\r\n                    },1000);\r\n                }else{\r\n                    dialog.error(json.msg);\r\n                }\r\n            }\r\n        })\r\n    });\r\n\r\n    //表格行操作提示\r\n    $('.operations .btn').tooltip();\r\n\r\n    //异步显示资料链接\r\n    $('a[rel=ajax]').click(function (e) {\r\n        e.preventDefault();\r\n        var self = $(this);\r\n        var title = $(this).data('title');\r\n        if (!title) title = $(this).text();\r\n        if (!title) title = $(this).attr('title');\r\n        if (!title) title = $(this).data('original-title');\r\n        var dlg = new Dialog({\r\n            btns: ['确定'],\r\n            onshow: function (body, dlgbox) {\r\n                $.ajax({\r\n                    url: self.attr('href')+'?dialog=1',\r\n                    beforeSend: function(request) {\r\n                        request.setRequestHeader(\"X-Requested-With\",\"htmlhttp\");\r\n                    },\r\n                    success: function (text) {\r\n                        var content=$(text)\r\n                        if(content.length>0){\r\n                            var header = content.find('.page-header')\r\n                            var pagecontent = content.find('.page-content')\r\n                            body.html('').append(pagecontent)\r\n                            dlgbox.find('.modal-header .modal-title').text(header.text())\r\n                        }else{\r\n                            body.html(text);\r\n                        }\r\n                    }\r\n                });\r\n            }\r\n        }).show('<p class=\"loading\">'+lang('loading...')+'</p>', title);\r\n    });\r\n\r\n    //确认操作\r\n    $('.link-confirm').click(function (e) {\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n        var text=$(this).data('confirm');\r\n        var url=$(this).attr('href');\r\n        if(text)text=text.replace(/(\\\\n|\\n)+/g,\"<br />\");\r\n        if(!text)text=lang('Confirm operation?');\r\n\r\n        dialog.confirm(text,function () {\r\n            $.ajax({\r\n                url:url,\r\n                dataType:'JSON',\r\n                success:function (json) {\r\n                    dialog.alert(json.msg);\r\n                    if(json.code==1){\r\n                        if(json.url){\r\n                            location.href=json.url;\r\n                        }else{\r\n                            location.reload();\r\n                        }\r\n                    }\r\n                },\r\n                error:function () {\r\n                    dialog.alert(lang('Server error.'));\r\n                }\r\n            })\r\n        });\r\n    });\r\n\r\n    //点击放大浏览图片效果\r\n    $('.img-view').click(function (e) {\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n        var url=$(this).attr('href');\r\n        if(!url)url=$(this).data('img');\r\n        var dlg = new Dialog({\r\n            btns: ['确定']\r\n        }).show('<a href=\"'+url+'\" class=\"d-block text-center\" target=\"_blank\"><img class=\"img-fluid\" src=\"'+url+'\" /></a><div class=\"text-muted text-center\">点击图片在新页面放大查看</div>', '查看图片');\r\n    });\r\n\r\n    //tab切换效果\r\n    $('.nav-tabs a').click(function (e) {\r\n        e.preventDefault();\r\n        $(this).tab('show');\r\n    });\r\n\r\n    //上传框\r\n    $('.custom-file .custom-file-input').on('change', function () {\r\n        var self=$(this);\r\n        if(!this.files || !this.files[0])return;\r\n        var inputgroup=$(this).parents('.input-group').eq(0);\r\n        var parent=inputgroup.parents('div').eq(0);\r\n        var label = $(this).parents('.custom-file').find('.custom-file-label');\r\n        if(!label.data('origtext')){\r\n            label.data('origtext',label.text());\r\n        }\r\n        label.text($(this).val());\r\n\r\n        if(!window.URL && !window.URL.createObjectURL)return;\r\n        var file=self[0].files[0];\r\n        var is_img=file.type && file.type.match(/(\\.|\\/)(jpe?g|png|gif|webp)$/);\r\n\r\n\r\n        var figure = parent.find('.figure');\r\n        if (!figure.length) {\r\n            parent.append('<figure class=\"figure\">\\n' +\r\n                '                            <img src=\"/static/images/blank.gif\" class=\"figure-img img-fluid rounded\" alt=\"image\">\\n' +\r\n                '                            <figcaption class=\"figure-caption text-center\"></figcaption>\\n' +\r\n                '                        </figure>');\r\n            figure = parent.find('.figure');\r\n        }\r\n        if(is_img) {\r\n            var img = figure.find('img');\r\n            var origurl = img.data('origurl');\r\n            if (!origurl) {\r\n                origurl = img.attr('src');\r\n                img.data('origurl', origurl);\r\n            }\r\n            var figcap = figure.find('figcaption');\r\n            if (figcap.data('origtext') === undefined) {\r\n                figcap.data('origtext', figcap.text());\r\n            }\r\n            img.attr('src', window.URL.createObjectURL(file));\r\n            figcap.text(self.val());\r\n        }\r\n\r\n        var cancel = inputgroup.find('a.cancel');\r\n        if (!cancel.length) {\r\n            inputgroup.append('<div class=\"input-group-append\"><a href=\"javascript:\" class=\"btn btn-outline-danger cancel\">取消</a></div>');\r\n            cancel = inputgroup.find('a.cancel');\r\n            cancel.click(function (e) {\r\n                dialog.confirm('取消上传该文件?', function () {\r\n                    self.val('');\r\n                    label.text(label.data('origtext'));\r\n                    if(is_img) {\r\n                        img.attr('src', origurl);\r\n                        figcap.text(figcap.data('origtext'));\r\n                    }\r\n                    cancel.parent().remove();\r\n                })\r\n\r\n            })\r\n        }\r\n    });\r\n\r\n    //表单Ajax提交\r\n    $('.btn-primary[type=submit]').click(function (e) {\r\n        var form = $(this).parents('form');\r\n        if(form.is('.noajax'))return true;\r\n        var btn = this;\r\n\r\n        var isbtn=$(btn).prop('tagName').toUpperCase()=='BUTTON';\r\n        var origText=isbtn?$(btn).text():$(btn).val();\r\n        var options = {\r\n            url: $(form).attr('action'),\r\n            type: 'POST',\r\n            dataType: 'JSON',\r\n            success: function (json) {\r\n                window.stop_ajax=false;\r\n                isbtn?$(btn).text(origText):$(btn).val(origText);\r\n                if (json.code == 1) {\r\n                    refreshFromPage();\r\n                    dialog.confirm({\r\n                        btns:[\r\n                            {'text':'关闭本页','type':'secondary'},\r\n                            {'text':'留在本页','isdefault':true,'type':'primary'}\r\n                        ],\r\n                        content:json.msg\r\n                    },function () {\r\n                        if (json.url) {\r\n                            location.href = json.url;\r\n                        } else {\r\n                            location.reload();\r\n                        }\r\n                    },function () {\r\n                        closeThisPage()\r\n                    });\r\n\r\n                } else {\r\n                    dialog.warning(json.msg);\r\n                    $(btn).removeAttr('disabled');\r\n                }\r\n            },\r\n            error: function (xhr) {\r\n                window.stop_ajax=false;\r\n                isbtn?$(btn).text(origText):$(btn).val(origText);\r\n                $(btn).removeAttr('disabled');\r\n                dialog.error('服务器处理错误');\r\n            }\r\n        };\r\n        if (form.attr('enctype') === 'multipart/form-data') {\r\n            if (!FormData) {\r\n                window.stop_ajax=false;\r\n                return true;\r\n            }\r\n            options.data = new FormData(form[0]);\r\n            options.cache = false;\r\n            options.processData = false;\r\n            options.contentType = false;\r\n            options.xhr= function() { //用以显示上传进度\r\n                var xhr = $.ajaxSettings.xhr();\r\n                if (xhr.upload) {\r\n                    xhr.upload.addEventListener('progress', function(event) {\r\n                        var percent = Math.floor(event.loaded / event.total * 100);\r\n                        $(btn).text(origText+'  ('+percent+'%)');\r\n                    }, false);\r\n                }\r\n                return xhr;\r\n            };\r\n        } else {\r\n            options.data = $(form).serialize();\r\n        }\r\n\r\n        e.preventDefault();\r\n        $(this).attr('disabled', true);\r\n        window.stop_ajax=true;\r\n        $.ajax(options);\r\n    });\r\n\r\n    //用户选择按钮绑定\r\n    $('.pickuser').click(function (e) {\r\n        var group = $(this).parents('.input-group');\r\n        var idele = group.find('[name=member_id]');\r\n        var infoele = group.find('[name=member_info]');\r\n        dialog.pickUser( function (user) {\r\n            idele.val(user.id);\r\n            infoele.val('[' + user.id + '] ' + user.username + (user.mobile ? (' / ' + user.mobile) : ''));\r\n        }, $(this).data('filter'));\r\n    });\r\n\r\n    //位置选择按钮绑定\r\n    $('.pick-locate').click(function(e){\r\n        var group=$(this).parents('.input-group');\r\n        var idele=group.find('input[type=text]');\r\n        dialog.pickLocate('qq',function(locate){\r\n            idele.val(locate.lng+','+locate.lat);\r\n        },idele.val());\r\n    });\r\n});","(function(window,$){\r\n    var dialogTpl='<div class=\"modal shirne-modal fade\" id=\"{@id}\" {if tabindex}tabindex=\"{@tabindex}\"{/if} role=\"dialog\" aria-labelledby=\"{@id}Label\" aria-hidden=\"true\">\\n' +\r\n        '    <div class=\"modal-dialog {@size}\">\\n' +\r\n        '        <div class=\"modal-content {@contentClass}\">\\n' +\r\n        '            <div class=\"modal-header\">\\n' +\r\n        '                <h4 class=\"modal-title\" id=\"{@id}Label\">{@title}</h4>\\n' +\r\n        '                <button type=\"button\" class=\"close\" data-dismiss=\"modal\">\\n' +\r\n        '                    <span aria-hidden=\"true\">&times;</span>\\n' +\r\n        '                    <span class=\"sr-only\">Close</span>\\n' +\r\n        '                </button>\\n' +\r\n        '            </div>\\n' +\r\n        '            <div class=\"modal-body {@bodyClass}\">\\n' +\r\n        '            </div>\\n' +\r\n        '            <div class=\"modal-footer\">\\n' +\r\n        '                <nav class=\"nav nav-fill\"></nav>\\n' +\r\n        '            </div>\\n' +\r\n        '        </div>\\n' +\r\n        '    </div>\\n' +\r\n        '</div>';\r\n    var dialogIdx=0;\r\n    function format_btn(btn,isdefault){\r\n        if(typeof(btn) === typeof 'a'){\r\n            btn = {'text':btn,'isdefault':isdefault?true:false};\r\n        }\r\n        if(btn.isdefault){\r\n            if(!btn.type){\r\n                btn.type='primary'\r\n            }\r\n        }\r\n        return btn;\r\n    }\r\n    function Dialog(opts){\r\n        if(!opts)opts={};\r\n        //处理按钮\r\n        if(opts.btns) {\r\n            if (typeof(opts.btns) == 'string') {\r\n                opts.btns = [format_btn(opts.btns,true)];\r\n            }\r\n            else if(opts.btns instanceof Array) {\r\n                for (var i = 0; i < opts.btns.length; i++) {\r\n                    opts.btns[i] = format_btn(opts.btns[i])\r\n                }\r\n            }else{\r\n                console.error('Dialog::construct argument btns error.');\r\n                opts.btns=[];\r\n            }\r\n        }\r\n\r\n        this.options=$.extend({\r\n            id:'modal_dialog_'+dialogIdx++,\r\n            header:true,\r\n            footer:true,\r\n            backdrop:true,\r\n            tabindex:-1,\r\n            size:'',\r\n            btns:[\r\n                {'text':'取消','type':'secondary'},\r\n                {'text':'确定','isdefault':true,'type':'primary'}\r\n            ],\r\n            contentClass:'',\r\n            onsure:null,\r\n            onshow:null,\r\n            onshown:null,\r\n            onhide:null,\r\n            onhidden:null\r\n        },opts);\r\n        if(!this.options.btns)this.options.btns=[];\r\n        var btncount=this.options.btns.length;\r\n        if(opts.addbtn){\r\n            if(!this.options.btns)this.options.btns=[];\r\n            opts.addbtn = format_btn(opts.addbtn)\r\n            if(btncount<1) {\r\n                this.options.btns.unshift(opts.addbtn)\r\n            }else{\r\n                this.options.btns.splice(btncount-1,0,opts.addbtn)\r\n            }\r\n            btncount=1\r\n        }\r\n        if(opts.addbtns){\r\n            if(!this.options.btns)this.options.btns=[];\r\n            if(btncount<1){\r\n                this.options.btns=opts.addbtns\r\n            }else{\r\n                var args=[btncount-1,0]\r\n                for(var i=0;i<opts.addbtns.length;i++){\r\n                    args.push(format_btn(opts.addbtns[i]))\r\n                }\r\n                this.options.btns.splice.apply(this.options.btns,args)\r\n            }\r\n            btncount=1\r\n        }\r\n        if(btncount<1){\r\n            this.options.footer=false;\r\n        }\r\n\r\n        this.closed=true;\r\n        this.box=$(this.options.id);\r\n    }\r\n    Dialog.prototype.generBtn=function(opt,idx){\r\n        if(opt['type'])opt['class']='btn-outline-'+opt['type'];\r\n        return '<a href=\"javascript:\" class=\"nav-item btn '+(opt['class']?opt['class']:'btn-outline-secondary')+'\" '+(opt.isdefault?'default':'')+' data-index=\"'+idx+'\">'+opt.text+'</a>';\r\n    };\r\n    Dialog.prototype.getDefaultBtn=function(){\r\n        var btn=null\r\n        for(var i=0;i<this.options.btns.length;i++){\r\n            btn=this.options.btns[i]\r\n            if(btn.isdefault)break;\r\n        }\r\n        return btn\r\n    }\r\n    Dialog.prototype.show=function(html,title){\r\n        this.box=$('#'+this.options.id);\r\n        if(!title)title='系统提示';\r\n\r\n        if(this.box.length<1) {\r\n            $(document.body).append(dialogTpl.compile({\r\n                id: this.options.id,\r\n                bodyClass:this.options.bodyClass,\r\n                contentClass:this.options.contentClass,\r\n                tabindex:this.options.tabindex,\r\n                size:this.options.size?('modal-'+this.options.size):'',\r\n                title:title\r\n            }));\r\n            this.box=$('#'+this.options.id);\r\n        }else{\r\n            this.box.unbind();\r\n            this.box.find('.modal-title').text(title);\r\n        }\r\n        if(!this.options.header){\r\n            this.box.find('.modal-header').remove();\r\n        }\r\n        if(!this.options.footer){\r\n            this.box.find('.modal-footer').remove();\r\n        }\r\n        if(this.options.backdrop!==true){\r\n            this.box.data('backdrop',this.options.backdrop);\r\n\r\n            //不需要背景的情况下会影响下面元素的点击\r\n            if(this.options.backdrop===false) {\r\n                this.box.css({'height':0,'overflow':'visible'});\r\n            }\r\n        }\r\n        if(!this.options.keyboard){\r\n            this.box.data('keyboard',false);\r\n        }\r\n\r\n        var self=this;\r\n        Dialog.instance=self;\r\n\r\n        //生成按钮\r\n        var btns=[];\r\n        for(var i=0;i<this.options.btns.length;i++){\r\n            btns.push(this.generBtn(this.options.btns[i],i));\r\n        }\r\n        this.box.find('.modal-footer .nav').html(btns.join('\\n'));\r\n\r\n        var body=this.box.find('.modal-body');\r\n        body.html(html);\r\n        this.box.on('hide.bs.modal',function(){\r\n            if(self.options.onhide){\r\n                self.options.onhide(body,self.box);\r\n            }\r\n            Dialog.instance=null;\r\n        });\r\n        this.box.on('hidden.bs.modal',function(){\r\n            if(self.options.onhidden){\r\n                self.options.onhidden(body,self.box);\r\n            }\r\n            self.closed=true;\r\n            self.box.remove();\r\n            self.box=null;\r\n        });\r\n        this.box.on('show.bs.modal',function(){\r\n            if(self.options.onshow){\r\n                self.options.onshow(body,self.box);\r\n            }\r\n        });\r\n        this.box.on('shown.bs.modal',function(){\r\n            if(self.box && self.closed){\r\n                return self.box.modal('hide');\r\n            }\r\n            if(self.options.onshown){\r\n                self.options.onshown(body,self.box);\r\n            }\r\n        });\r\n        if(this.options.footer) {\r\n            this.box.find('.modal-footer .btn').click(function () {\r\n                var result = true, idx = $(this).data('index');\r\n                if (self.options.btns[idx].click) {\r\n                    result = self.options.btns[idx].click.apply(this, [body, self.box]);\r\n                }else {\r\n                    if (self.options.btns[idx].isdefault) {\r\n                        if (self.options.onsure) {\r\n                            result = self.options.onsure.apply(this, [body, self.box]);\r\n                        }\r\n                    }\r\n                }\r\n                if (result !== false) {\r\n                    self.box.modal('hide');\r\n                }\r\n            });\r\n        }\r\n        this.closed=false;\r\n        this.box.modal('show');\r\n        return this;\r\n    };\r\n    Dialog.prototype.hide=Dialog.prototype.close=function(){\r\n        if(this.box && !this.closed) {\r\n            this.closed=true;\r\n            this.box.modal('hide');\r\n        }\r\n        return this;\r\n    };\r\n\r\n    var dialog={\r\n        error:function (message,time) {\r\n            return this.message(message,'error',time);\r\n        },\r\n        success:function (message,time) {\r\n            return this.message(message,'success',time);\r\n        },\r\n        warning:function (message,time) {\r\n            return this.message(message,'warning',time);\r\n        },\r\n        info:function (message,time) {\r\n            return this.message(message,'info',time);\r\n        },\r\n        loading:function (message,time) {\r\n            return this.message(message?message:'加载中...','loading',time);\r\n        },\r\n        message:function (message,type,time) {\r\n            var cssClass='bg-info text-white';\r\n            var icon='information-circle';\r\n            if(type) {\r\n                switch (type) {\r\n                    case 'danger':\r\n                    case 'error':\r\n                        icon='close-circle';\r\n                        cssClass='bg-danger text-white';\r\n                        break;\r\n                    case 'warning':\r\n                        icon='warning';\r\n                        cssClass='bg-warning text-white';\r\n                        break;\r\n                    case 'loading':\r\n                        icon='<div class=\"spinner-border text-light\" role=\"status\">\\n' +\r\n                            '  <span class=\"sr-only\">Loading...</span>\\n' +\r\n                            '</div>';\r\n                        cssClass='bg-info text-white';\r\n                        if(!time)time=10;\r\n                        break;\r\n                    case 'success':\r\n                        icon='checkmark-circle';\r\n                        cssClass='bg-success text-white';\r\n                        break;\r\n                }\r\n            }\r\n            if(type != 'loading')icon= '<i class=\"ion-md-'+icon+'\"></i>';\r\n            var html='<div class=\"dialog-message\" >'+icon+'&nbsp;&nbsp;'+message+(type=='loading'?'':'<a href=\"javascript:\" class=\"ion-md-close closebtn\"></a>')+'</div>';\r\n\r\n            var dlg= new Dialog({\r\n                footer:false,\r\n                header:false,\r\n                backdrop:false,\r\n                tabindex:'',\r\n                size:'sm',\r\n                contentClass:cssClass,\r\n                onshow:function (body) {\r\n                    body.find('.closebtn').click(function () {\r\n                        dlg.close();\r\n                    })\r\n                }\r\n            }).show(html,'');\r\n            if(!time)time=2;\r\n            setTimeout(function(){dlg.close();},time*1000);\r\n            return dlg;\r\n        },\r\n        alert:function(message,callback,icon){\r\n            var called=false;\r\n            var iscallback=typeof callback=='function';\r\n            var title='';\r\n            var size='sm';\r\n            var html='';\r\n            if(callback!==undefined && !iscallback){\r\n                icon=callback;\r\n            }\r\n            if($.isPlainObject(message)){\r\n                if(message['title']){\r\n                    title=message['title'];\r\n                }\r\n                if(message['size']!==undefined){\r\n                    size=message['size'];\r\n                }\r\n                if(message['content']===undefined){\r\n                    throw 'message.content can not be empty.';\r\n                }\r\n                message=message['content'];\r\n            }\r\n            var iconMap= {\r\n                success:'checkmark-circle',\r\n                info: 'information-circle',\r\n                warning:'alert',\r\n                error:'remove-circle'\r\n            };\r\n            var color='primary';\r\n            if(icon===undefined)icon='information-circle';\r\n            else if(iconMap[icon]){\r\n                color=icon=='error'?'danger':icon;\r\n                icon=iconMap[icon];\r\n            }\r\n            if(icon) {\r\n                html = icon=='none'?'<div class=\"container-fluid\">{@message}</div>'.compile({\r\n                    message: message\r\n                }):'<div class=\"row\" style=\"align-items: center;\"><div class=\"col-3 text-right\"><i class=\"ion-md-{@icon} text-{@color}\" style=\"font-size:3em;\"></i> </div><div class=\"col-9\" >{@message}</div> </div>'.compile({\r\n                    message: message,\r\n                    icon: icon,\r\n                    color: color\r\n                });\r\n            }else{\r\n                html=message;\r\n            }\r\n            return new Dialog({\r\n                btns:'确定',\r\n                size:size,\r\n                header:title?true:false,\r\n                onsure:function(){\r\n                    if(iscallback){\r\n                        called=true;\r\n                        return callback(true);\r\n                    }\r\n                },\r\n                onhide:function(){\r\n                    if(!called && iscallback){\r\n                        callback(false);\r\n                    }\r\n                }\r\n            }).show(html,title);\r\n        },\r\n        confirm:function(message,confirm,cancel, icon, countdown){\r\n            var called=false;\r\n            if(typeof confirm !== 'function'){\r\n                icon = confirm;\r\n                if(typeof cancel === 'function'){\r\n                    confirm = cancel;\r\n                    cancel = null;\r\n                }else{\r\n                    countdown = cancel;\r\n                }\r\n            }else if(typeof cancel !== 'function'){\r\n                countdown = icon;\r\n                icon = cancel;\r\n            }\r\n            if(typeof icon ===  'number'){\r\n                countdown = icon;\r\n                icon = undefined;\r\n            }\r\n\r\n            var title='';\r\n            var size='sm';\r\n            var btns=[\r\n                {'text':'取消','type':'secondary'},\r\n                {'text':'确定','isdefault':true,'type':'primary'}\r\n            ];\r\n            if($.isPlainObject(message)){\r\n                if(message['title']){\r\n                    title=message['title'];\r\n                }\r\n                if(message['size']!==undefined){\r\n                    size=message['size'];\r\n                }\r\n                if(message['btns']!==undefined){\r\n                    btns=message['btns'];\r\n                }\r\n                if(message['content']===undefined){\r\n                    throw 'message.content can not be empty.';\r\n                }\r\n                message=message['content'];\r\n            }\r\n\r\n            var iconMap= {\r\n                success:'checkmark-circle',\r\n                info: 'information-circle',\r\n                warning:'alert',\r\n                error:'remove-circle'\r\n            };\r\n            var color='primary';\r\n            if(icon===undefined)icon='information-circle';\r\n            else if(iconMap[icon]){\r\n                color = icon==='error'?'danger':icon;\r\n                icon = iconMap[icon];\r\n            }\r\n            var html=icon=='none'?'<div class=\"container-fluid\">{@message}</div>'.compile({\r\n                message: message\r\n            }):'<div class=\"row\" style=\"align-items: center;\"><div class=\"col-3 text-right\"><i class=\"ion-md-{@icon} text-{@color}\" style=\"font-size:3em;\"></i> </div><div class=\"col-9\" >{@message}</div> </div>'.compile({\r\n                message:message,\r\n                icon:icon,\r\n                color:color\r\n            });\r\n\r\n            var inteval=0;\r\n\r\n            var dlg = new Dialog({\r\n                header: title?true:false,\r\n                size:size,\r\n                backdrop:'static',\r\n                onsure:function(){\r\n                    if(confirm && typeof confirm==='function'){\r\n                        called=true;\r\n                        return confirm();\r\n                    }\r\n                },\r\n                onhide:function () {\r\n                    clearInterval(inteval);\r\n                    if(called === false && typeof cancel === 'function'){\r\n                        return cancel();\r\n                    }\r\n                }\r\n            }).show(html, title);\r\n\r\n            if(countdown && typeof countdown === 'number') {\r\n                var btn = dlg.box.find('.modal-footer .btn-outline-primary');\r\n                var btnText = dlg.getDefaultBtn().text;\r\n                btn.addClass('disabled').text(btnText+'(' + countdown + ')');\r\n                inteval = setInterval(function () {\r\n                    countdown--;\r\n                    if (countdown > 0) {\r\n                        btn.text(btnText+'(' + countdown + ')');\r\n                    } else {\r\n                        btn.text(btnText);\r\n                        btn.removeClass('disabled');\r\n                        clearInterval(inteval);\r\n                    }\r\n                }, 1000);\r\n            }\r\n            return dlg;\r\n        },\r\n        prompt:function(message,callback,cancel){\r\n            var called=false;\r\n            var contentHtml='<div class=\"form-group\">{@input}</div>';\r\n            var title='请输入信息';\r\n            var is_multi=false;\r\n            var is_textarea=false;\r\n            var multiset={};\r\n            var keyboard=true;\r\n            var dftValue = '';\r\n            if(typeof message=='string'){\r\n                title=message;\r\n            }else{\r\n                title=message.title;\r\n                if(message.content) {\r\n                    contentHtml = message.content.indexOf('{@input}') > -1 ? message.content : message.content + contentHtml;\r\n                }\r\n                if(message.multi){\r\n                    is_multi=true;\r\n                    multiset=message.multi;\r\n                }\r\n                if(message.is_textarea){\r\n                    is_textarea=true;\r\n                }\r\n                if(message.keyboard !== undefined){\r\n                    keyboard = message.keyboard;\r\n                }else if(is_textarea){\r\n                    keyboard = false;\r\n                }\r\n                if(message.default){\r\n                    dftValue=message.default.toString();\r\n                }\r\n            }\r\n            var inputHtml='<input type=\"text\" name=\"confirm_input\" class=\"form-control\" />';\r\n            if(is_textarea){\r\n                inputHtml='<textarea name=\"confirm_input\" class=\"form-control\" ></textarea>';\r\n            }\r\n            if(is_multi){\r\n                inputHtml='';\r\n                for(var i in multiset){\r\n                    var label = multiset[i], value = '', sub_is_textarea=false;\r\n                    if(typeof label === 'object'){\r\n                        value = label.value?label.value:''\r\n                        sub_is_textarea = label.is_textarea?label.is_textarea:is_textarea;\r\n                        label = label.label?label.label:(label.title?label.title:i)\r\n                    }\r\n                    if(sub_is_textarea){\r\n                        inputHtml+= '<div class=\"input-group mt-2\"><div class=\"input-group-prepend\"><span class=\"input-group-text\">'+label+'</span></div><textarea name=\"confirm_input\" data-key=\"'+i+'\" class=\"form-control\" >'+value+'</textarea></div>';\r\n                    }else{\r\n                        inputHtml+= '<div class=\"input-group mt-2\"><div class=\"input-group-prepend\"><span class=\"input-group-text\">'+label+'</span></div><input type=\"text\" data-key=\"'+i+'\" name=\"confirm_input\" value=\"'+value+'\" class=\"form-control\" /></div>';\r\n                    }\r\n                }\r\n            }\r\n            return new Dialog({\r\n                backdrop:'static',\r\n                keyboard: keyboard,\r\n                onshow:function(body){\r\n                    if(message && message.onshow){\r\n                        message.onshow(body);\r\n                    }\r\n                },\r\n                onshown:function(body){\r\n                    var firstInput = body.find('[name=confirm_input]').eq(0);\r\n                    if(dftValue){\r\n                        firstInput.val(dftValue);\r\n                    }\r\n                    firstInput.select();\r\n                    if(message && message.onshown){\r\n                        message.onshown(body);\r\n                    }\r\n                },\r\n                onsure:function(body){\r\n                    var inputs=body.find('[name=confirm_input]'),val=inputs.val();\r\n                    if(is_multi){\r\n                        val={};\r\n                        inputs.each(function () {\r\n                            var key=$(this).data('key')\r\n                            val[key]=$(this).val()\r\n                        })\r\n                    }\r\n                    if(typeof callback=='function'){\r\n                        var result = callback(val, body);\r\n                        if(result===true){\r\n                            called=true;\r\n                        }\r\n                        return result;\r\n                    }\r\n                },\r\n                onhide:function () {\r\n                    if(called=false && typeof cancel=='function'){\r\n                        return cancel();\r\n                    }\r\n                }\r\n            }).show(contentHtml.compile({input:inputHtml}),title);\r\n        },\r\n        action:function (list,callback,title) {\r\n            var html='<div class=\"list-group\"  style=\"max-height: 70vh;overflow: auto;\"><a href=\"javascript:\" class=\"list-group-item list-group-item-action\">'+list.join('</a><a href=\"javascript:\" class=\"list-group-item list-group-item-action\">')+'</a></div>';\r\n            var actions=null;\r\n            var dlg=new Dialog({\r\n                bodyClass:'modal-action',\r\n                backdrop:'static',\r\n                size:'sm',\r\n                btns:[\r\n                    {'text':'取消','type':'secondary'}\r\n                ],\r\n                onshow:function(body){\r\n                    actions=body.find('.list-group-item-action');\r\n                    actions.click(function (e) {\r\n                        actions.removeClass('active');\r\n                        $(this).addClass('active');\r\n                        var val=actions.index(this);\r\n                        if(typeof callback=='function'){\r\n                            if( callback(val)!==false){\r\n                                dlg.close();\r\n                            }\r\n                        }else {\r\n                            dlg.close();\r\n                        }\r\n                    })\r\n                },\r\n                onsure:function(body){\r\n                    return true;\r\n                },\r\n                onhide:function () {\r\n                    return true;\r\n                }\r\n            }).show(html,title?title:'请选择');\r\n        },\r\n        pickList:function (config,callback,filter) {\r\n            if(typeof config==='string')config={url:config};\r\n            if(Object.prototype.toString.call(config) == '[object Array]'){\r\n                config = {\r\n                    isajax:false,\r\n                    list:config\r\n                };\r\n            }\r\n            var icon = config.icon?'<i class=\"ion-md-checkmark\"></i> ':''\r\n            config=$.extend({\r\n                url:'',\r\n                title:'',\r\n                isajax:true,\r\n                list:[],\r\n                name:'项目',\r\n                searchHolder:'根据名称搜索',\r\n                idkey:'id',\r\n                titlekey:'title',\r\n                onRow:null,\r\n                extend:null,\r\n                rowTemplate:'<a href=\"javascript:\" data-id=\"{@id}\" class=\"list-group-item list-group-item-action\" style=\"line-height:30px;\">'+icon+'[{@id}]&nbsp;{@title}</a>'\r\n            },config||{});\r\n            var current=null;\r\n            var exthtml='';\r\n            if(config.extend){\r\n                exthtml='<select name=\"'+config.extend.name+'\" class=\"form-control\"><option value=\"\">'+config.extend.title+'</option></select>';\r\n            }\r\n            if(!filter)filter={};\r\n\r\n            var title='请选择'+config.name;\r\n            var contentTpl='<div class=\"list-group list-group-picker mt-2\" style=\"max-height:500px;overflow: auto;\"></div>';\r\n            if(config.isajax){\r\n                title='请搜索并选择'+config.name;\r\n                contentTpl = '<div class=\"input-group\">'+exthtml+'<input type=\"text\" class=\"form-control searchtext\" name=\"keyword\" placeholder=\"'+config.searchHolder+'\"/><div class=\"input-group-append\"><a class=\"btn btn-outline-secondary searchbtn\"><i class=\"ion-md-search\"></i></a></div></div>'+contentTpl;\r\n            }\r\n            if(!config.title)config.title=title;\r\n\r\n            var dlg=new Dialog({\r\n                backdrop:'static',\r\n                onshown:function(body){\r\n                    var btn=body.find('.searchbtn');\r\n                    var input=body.find('.searchtext');\r\n                    var listbox=body.find('.list-group');\r\n                    var isloading=false;\r\n                    listbox.on('click','a.list-group-item',function () {\r\n                        var id = $(this).data('id');\r\n                        for (var i = 0; i < config.list.length; i++) {\r\n                            if(config.list[i][config.idkey]==id){\r\n                                current=config.list[i];\r\n                                listbox.find('a.list-group-item').removeClass('active');\r\n                                $(this).addClass('active');\r\n                                break;\r\n                            }\r\n                        }\r\n                    });\r\n                    if(!config.isajax){\r\n                        listbox.html(config.rowTemplate.compile(config.list, true));\r\n                        return;\r\n                    }\r\n                    var extField=null;\r\n                    if(config.extend){\r\n                        extField=body.find('[name='+config.extend.name+']');\r\n                        if(config.extend.list){\r\n                            extField.append(config.extend.htmlRow.compile(config.extend.list, true));\r\n                        }else {\r\n                            $.ajax({\r\n                                url: config.extend.url,\r\n                                type: 'GET',\r\n                                dataType: 'JSON',\r\n                                success: function (json) {\r\n                                    extField.append(config.extend.htmlRow.compile(json.data, true));\r\n                                }\r\n                            });\r\n                        }\r\n                    }\r\n                    btn.click(function(){\r\n                        if(isloading)return;\r\n                        isloading=true;\r\n                        listbox.html('<span class=\"list-loading\">加载中...</span>');\r\n                        filter['key']=input.val();\r\n                        if(config.extend){\r\n                            filter[config.extend.name]=extField.val();\r\n                        }\r\n                        $.ajax(\r\n                            {\r\n                                url:config.url,\r\n                                type:'GET',\r\n                                dataType:'JSON',\r\n                                data:filter,\r\n                                success:function(json){\r\n                                    isloading=false;\r\n                                    if(json.code===1){\r\n                                        if(json.data && json.data.length) {\r\n                                            config.list = json.data\r\n                                            listbox.html(config.rowTemplate.compile(json.data, true));\r\n\r\n                                        }else{\r\n                                            listbox.html('<span class=\"list-loading\"><i class=\"ion-md-warning\"></i> 没有检索到'+config.name+'</span>');\r\n                                        }\r\n                                    }else{\r\n                                        listbox.html('<span class=\"text-danger\"><i class=\"ion-md-warning\"></i> 加载失败</span>');\r\n                                    }\r\n                                }\r\n                            }\r\n                        );\r\n\r\n                    }).trigger('click');\r\n                },\r\n                onsure:function(body){\r\n                    if(!current){\r\n                        dialog.warning('没有选择'+config.name+'!');\r\n                        return false;\r\n                    }\r\n                    if(typeof callback=='function'){\r\n                        var result = callback(current);\r\n                        return result;\r\n                    }\r\n                }\r\n            }).show(contentTpl,config.title);\r\n            return dlg;\r\n        },\r\n        pickUser:function(callback,title,filter){\r\n            if(typeof title=='object' && !filter){\r\n                filter = title;\r\n                title = null;\r\n            }\r\n            return this.pickList({\r\n                url:window.get_search_url('member'),\r\n                title:title,\r\n                name:'会员',\r\n                searchHolder:'根据会员id或名称，电话来搜索',\r\n                rowTemplate:'<a href=\"javascript:\" data-id=\"{@id}\" class=\"list-group-item list-group-item-action\" style=\"line-height:30px;\">{if @avatar}<img src=\"{@avatar}\" style=\"width:30px;height:30px;border-radius: 100%;margin-right:10px;\" />{else}<i class=\"ion-md-person\"></i>{/if} [{@id}]&nbsp;{if @nickname}{@nickname}{else}{@username}{/if}&nbsp;&nbsp;&nbsp;{if @mobile}<small><i class=\"ion-md-phone-portrait\"></i> {@mobile}</small>{/if}</a>'\r\n            },callback,filter);\r\n        },\r\n        pickArticle:function(callback,title,filter){\r\n            if(typeof title=='object' && !filter){\r\n                filter = title;\r\n                title = null;\r\n            }\r\n            return this.pickList({\r\n                url:window.get_search_url('article'),\r\n                rowTemplate:'<a href=\"javascript:\" data-id=\"{@id}\" class=\"list-group-item list-group-item-action\">{if @cover}<div style=\"background-image:url({@cover})\" class=\"imgview\" ></div>{/if}<div class=\"text-block\">[{@id}]&nbsp;{@title}&nbsp;<br />{@description}</div></a>',\r\n                title:title,\r\n                name:'文章',\r\n                idkey:'id',\r\n                extend:{\r\n                   name:'cate',\r\n                    title:'按分类搜索',\r\n                    url:get_cate_url('article'),\r\n                    htmlRow:'<option value=\"{@id}\">{@html}{@title}</option>'\r\n                },\r\n                'searchHolder':'根据文章标题搜索'\r\n            },callback,filter);\r\n        },\r\n        pickProduct:function(callback,title,filter){\r\n            if(typeof title=='object' && !filter){\r\n                filter = title;\r\n                title = null;\r\n            }\r\n            var issku = filter && filter['searchtype'];\r\n            var titletpl='<div class=\"text-block\">[{@id}]&nbsp;{@title}&nbsp;<br />{@min_price}{if @max_price>@min_price}~{@max_price}{/if}</div>';\r\n            if(issku)titletpl='<div class=\"text-block\">[{@id}]&nbsp;{@title}&nbsp;<br />[{@sku_goods_no}]&nbsp;{@price}</div>';\r\n            return this.pickList({\r\n                url:window.get_search_url('product'),\r\n                rowTemplate:'<a href=\"javascript:\" data-id=\"{@id}\" class=\"list-group-item list-group-item-action\">{if @image}<div style=\"background-image:url({@image})\" class=\"imgview\" ></div>{/if}'+titletpl+'</a>',\r\n                title:title,\r\n                name:'产品',\r\n                idkey:'id',\r\n                extend:{\r\n                    name:'cate',\r\n                    title:'按分类搜索',\r\n                    url:get_cate_url('product'),\r\n                    htmlRow:'<option value=\"{@id}\">{@html}{@title}</option>'\r\n                },\r\n                'searchHolder':'根据产品名称搜索'\r\n            },callback,filter);\r\n        },\r\n        pickLocate:function(type, callback, locate){\r\n            var settedLocate=null;\r\n            var height=$(window).height()*.6\r\n            var dlg=new Dialog({\r\n                size:'lg',\r\n                backdrop:'static',\r\n                onshown:function(body){\r\n                    var btn=body.find('.searchbtn');\r\n                    var input=body.find('.searchtext');\r\n                    var mapbox=body.find('.map');\r\n                    var mapinfo=body.find('.mapinfo');\r\n                    var isloading=false;\r\n                    setTimeout(function () {\r\n                        var map=InitMap('tencent',mapbox,function(address,locate){\r\n                            mapinfo.html(address+'&nbsp;'+locate.lng+','+locate.lat);\r\n                            settedLocate=locate;\r\n                        },locate);\r\n                        btn.click(function(){\r\n                            var search=input.val();\r\n                            map.setLocate(search);\r\n                        });\r\n                        body.find('.setToCenter').click(function (e) {\r\n                            map.showAtCenter();\r\n                        })\r\n                    },500)\r\n\r\n                },\r\n                onsure:function(body){\r\n                    if(!settedLocate){\r\n                        dialog.warning('没有选择位置!');\r\n                        return false;\r\n                    }\r\n                    if(typeof callback==='function'){\r\n                        var result = callback(settedLocate);\r\n                        return result;\r\n                    }\r\n                }\r\n            }).show('<div class=\"input-group\"><input type=\"text\" class=\"form-control searchtext\" name=\"keyword\" placeholder=\"填写地址检索位置\"/><div class=\"input-group-append\"><a class=\"btn btn-outline-secondary searchbtn\"><i class=\"ion-md-search\"></i></a></div></div>' +\r\n                '<div class=\"map mt-2\" style=\"height:'+height+'px\"></div>' +\r\n                '<div class=\"float-right mt-2 mapactions\"><a href=\"javascript:\" class=\"setToCenter\">定位到地图中心</a></div>' +\r\n                '<div class=\"mapinfo mt-2 text-muted\">未选择位置</div>','请选择地图位置');\r\n            return dlg;\r\n        }\r\n    };\r\n\r\n    $(document).on('keydown', function(e){\r\n        if (e.keyCode == 13) {\r\n            var currentModal = $('.shirne-modal').eq(-1);\r\n            if(currentModal && currentModal.data('keyboard') !== false){\r\n                currentModal.find('.modal-footer .btn[default]').trigger('click');\r\n            }\r\n        }\r\n    });\r\n\r\n    // 暴露接口\r\n    window.Dialog=$.Dialog=Dialog;\r\n    window.dialog=$.dialog=dialog;\r\n})(window,jQuery||Zepto);\r\n\r\n","\r\njQuery.extend(jQuery.fn,{\r\n    tags:function(nm,onupdate){\r\n        var data=[];\r\n        var tpl='<span class=\"badge badge-info\">{@label}<input type=\"hidden\" name=\"'+nm+'\" value=\"{@label}\"/><button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button></span>';\r\n        var item=$(this).parents('.form-control');\r\n        var labelgroup=$('<span class=\"badge-group\"></span>');\r\n        var input=this;\r\n        this.before(labelgroup);\r\n        this.on('keyup',function(){\r\n            var val=$(this).val().replace(/，/g,',');\r\n            var updated=false;\r\n            if(val && val.indexOf(',')>-1){\r\n                var vals=val.split(',');\r\n                for(var i=0;i<vals.length;i++){\r\n                    vals[i]=vals[i].replace(/^\\s|\\s$/g,'');\r\n                    if(vals[i] && data.indexOf(vals[i])===-1){\r\n                        data.push(vals[i]);\r\n                        labelgroup.append(tpl.compile({label:vals[i]}));\r\n                        updated=true;\r\n                    }\r\n                }\r\n                input.val('');\r\n                if(updated && onupdate)onupdate(data);\r\n            }\r\n        }).on('blur',function(){\r\n            var val=$(this).val();\r\n            if(val) {\r\n                $(this).val(val + ',').trigger('keyup');\r\n            }\r\n        }).trigger('blur');\r\n        labelgroup.on('click','.close',function(){\r\n            var tag=$(this).parents('.badge').find('input').val();\r\n            var id=data.indexOf(tag);\r\n            if(id)data.splice(id,1);\r\n            $(this).parents('.badge').remove();\r\n            if(onupdate)onupdate(data);\r\n        });\r\n        item.click(function(){\r\n            input.focus();\r\n        });\r\n    }\r\n});","\r\n(function(window,$) {\r\n\r\n\r\n    var apis = {\r\n        'baidu': '//api.map.baidu.com/api?ak=__KEY__&v=1.5&services=false&callback=',\r\n        'google': '//maps.google.com/maps/api/js?key=__KEY__&callback=',\r\n        'tencent': '//map.qq.com/api/js?v=2.exp&key=__KEY__&callback=',\r\n        'gaode': '//webapi.amap.com/maps?v=1.3&key=__KEY__&callback='\r\n    };\r\n\r\n    function loadScript(src) {\r\n        var script = document.createElement(\"script\");\r\n        script.type = \"text/javascript\";\r\n        script.src = src;\r\n        document.body.appendChild(script);\r\n    }\r\n\r\n    var mapObj,mapBox,onPick;\r\n\r\n    function InitMap(maptype,box,callback,locate) {\r\n        if (mapObj) mapObj.hide();\r\n        mapBox=$(box);\r\n        onPick=callback;\r\n\r\n        switch (maptype.toLowerCase()) {\r\n            case 'baidu':\r\n                mapObj = new BaiduMap();\r\n                break;\r\n            case 'google':\r\n                mapObj = new GoogleMap();\r\n                break;\r\n            case 'tencent':\r\n            case 'qq':\r\n                mapObj = new TencentMap();\r\n                break;\r\n            case 'gaode':\r\n                mapObj = new GaodeMap();\r\n                break;\r\n        }\r\n        if (!mapObj) return dialog.warning('不支持该地图类型');\r\n        if(locate){\r\n            if(typeof locate==='string'){\r\n                var loc=locate.split(',');\r\n                locate={\r\n                    lng:parseFloat(loc[0]),\r\n                    lat:parseFloat(loc[1])\r\n                }\r\n            }\r\n            mapObj.locate=locate;\r\n        }\r\n        mapObj.setMap();\r\n\r\n        return mapObj;\r\n    }\r\n\r\n    function BaseMap(type) {\r\n        if(type !== undefined) {\r\n            var key = 'MAPKEY_' + type.toUpperCase();\r\n\r\n            if (!window[key]) {\r\n                throw 'Pls define the ' + key + ' on window.';\r\n            }\r\n\r\n            this.mapkey = window[key];\r\n            this.mapType = type;\r\n            this.ishide = false;\r\n            this.isshow = false;\r\n            this.toshow = false;\r\n            this.marker = null;\r\n            this.infoWindow = null;\r\n            this.mapbox = null;\r\n            this.locate = {lng: 116.396795, lat: 39.933084};\r\n            this.map = null;\r\n        }\r\n    }\r\n\r\n    BaseMap.prototype.isAPIReady = function () {\r\n        return false;\r\n    };\r\n    BaseMap.prototype.pointToObject = function () {\r\n    };\r\n    BaseMap.prototype.objectToPoint = function () {\r\n    };\r\n    BaseMap.prototype.setMap = function () {\r\n    };\r\n    BaseMap.prototype.showInfo = function () {\r\n    };\r\n    BaseMap.prototype.getCenter = function () {\r\n    };\r\n    BaseMap.prototype.getAddress = function (rs) {\r\n        return \"\";\r\n    };\r\n    BaseMap.prototype.setLocate = function (address) {\r\n    };\r\n\r\n    BaseMap.prototype.loadAPI = function () {\r\n        var self = this;\r\n        if (!this.isAPIReady()) {\r\n            this.mapbox = $('<div id=\"' + this.mapType + 'map\" class=\"mapbox\">loading...</div>');\r\n            mapBox.append(this.mapbox);\r\n\r\n            //console.log(this.mapType+' maploading...');\r\n            var func = 'mapload' + new Date().getTime();\r\n            window[func] = function () {\r\n                self.setMap();\r\n                delete window[func];\r\n            };\r\n            var apiurl=apis[this.mapType].replace('__KEY__',this.mapkey);\r\n            loadScript(apiurl + func);\r\n            return false;\r\n        } else {\r\n            //console.log(this.mapType + ' maploaded');\r\n            this.mapbox = $('#' + this.mapType + 'map');\r\n            if (this.mapbox.length < 1) {\r\n                this.mapbox = $('<div id=\"' + this.mapType + 'map\" class=\"mapbox\"></div>');\r\n                mapBox.append(this.mapbox);\r\n            }\r\n            return true;\r\n        }\r\n    };\r\n    BaseMap.prototype.setInfoContent = function () {\r\n        if (!this.infoWindow) return;\r\n        var title = '<b>当前位置</b>';\r\n        var addr = '<p style=\"line-height:1.6em;\"></p>';\r\n        if (this.infoWindow.setTitle) {\r\n            this.infoWindow.setTitle(title);\r\n            this.infoWindow.setContent(addr);\r\n        } else {\r\n            var content = '<h3>' + title + '</h3><div style=\"width:250px\">' + addr + '</div>';\r\n            this.infoWindow.setContent(content);\r\n        }\r\n    };\r\n    BaseMap.prototype.showAtCenter=function () {\r\n        var center=this.getCenter();\r\n        this.showInfo(center);\r\n    };\r\n    BaseMap.prototype.showLocationInfo = function (pt, rs) {\r\n\r\n        this.showInfo();\r\n        var address=this.getAddress(rs);\r\n        var locate={};\r\n        if (typeof (pt.lng) === 'function') {\r\n            locate.lng=pt.lng();\r\n            locate.lat=pt.lat();\r\n        } else {\r\n            locate.lng=pt.lng;\r\n            locate.lat=pt.lat;\r\n        }\r\n\r\n        onPick(address,locate);\r\n    };\r\n    BaseMap.prototype.show = function () {\r\n        this.ishide = false;\r\n        this.setMap();\r\n        this.showInfo();\r\n    };\r\n    BaseMap.prototype.hide = function () {\r\n        this.ishide = true;\r\n        if (this.infoWindow) {\r\n            this.infoWindow.close();\r\n        }\r\n        if (this.mapbox) {\r\n            $(this.mapbox).remove();\r\n        }\r\n    };\r\n\r\n\r\n    function BaiduMap() {\r\n        BaseMap.call(this, \"baidu\");\r\n    }\r\n\r\n    BaiduMap.prototype = new BaseMap();\r\n    BaiduMap.prototype.constructor = BaiduMap;\r\n    BaiduMap.prototype.isAPIReady = function () {\r\n        return !!window['BMap'];\r\n    };\r\n\r\n    BaiduMap.prototype.setMap = function () {\r\n        var self = this;\r\n        if (this.isshow || this.ishide) return;\r\n        if (!this.loadAPI()) return;\r\n\r\n        var map = self.map = new BMap.Map(this.mapbox.attr('id')); //初始化地图\r\n        map.addControl(new BMap.NavigationControl());  //初始化地图控件\r\n        map.addControl(new BMap.ScaleControl());\r\n        map.addControl(new BMap.OverviewMapControl());\r\n        map.enableScrollWheelZoom();\r\n\r\n        var point = this.objectToPoint(this.locate);\r\n        map.centerAndZoom(point, 15); //初始化地图中心点\r\n        this.marker = new BMap.Marker(point); //初始化地图标记\r\n        this.marker.enableDragging(); //标记开启拖拽\r\n\r\n        var gc = new BMap.Geocoder(); //地址解析类\r\n        //添加标记拖拽监听\r\n        this.marker.addEventListener(\"dragend\", function (e) {\r\n            //获取地址信息\r\n            gc.getLocation(e.point, function (rs) {\r\n                self.showLocationInfo(e.point, rs);\r\n            });\r\n        });\r\n\r\n        //添加标记点击监听\r\n        this.marker.addEventListener(\"click\", function (e) {\r\n            gc.getLocation(e.point, function (rs) {\r\n                self.showLocationInfo(e.point, rs);\r\n            });\r\n        });\r\n\r\n        map.addOverlay(this.marker); //将标记添加到地图中\r\n\r\n        gc.getLocation(point, function (rs) {\r\n            self.showLocationInfo(point, rs);\r\n        });\r\n\r\n        this.infoWindow = new BMap.InfoWindow(\"\", {\r\n            width: 250,\r\n            title: \"\"\r\n        });\r\n\r\n        this.isshow = true;\r\n        if (this.toshow) {\r\n            this.showInfo();\r\n            this.toshow = false;\r\n        }\r\n    };\r\n    BaiduMap.prototype.pointToObject = function (point) {\r\n        return {\r\n            lng:point.lng,\r\n            lat:point.lat\r\n        };\r\n    };\r\n    BaiduMap.prototype.objectToPoint = function (object) {\r\n        return new BMap.Point(parseFloat(object.lng),parseFloat(object.lat));\r\n    };\r\n    BaiduMap.prototype.getCenter = function () {\r\n        var center=this.map.getCenter();\r\n        return this.pointToObject(center);\r\n    };\r\n\r\n    BaiduMap.prototype.showInfo = function (point) {\r\n        if (this.ishide) return;\r\n        if (!this.isshow) {\r\n            this.toshow = true;\r\n            return;\r\n        }\r\n        if(point){\r\n            this.locate=point;\r\n            this.marker.panTo(new BMap.Point(point.lng,point.lat));\r\n        }\r\n        this.setInfoContent();\r\n\r\n        this.marker.openInfoWindow(this.infoWindow);\r\n    };\r\n    BaiduMap.prototype.getAddress = function (rs) {\r\n        var addComp = rs.addressComponents;\r\n        if(addComp) {\r\n            return addComp.province + \", \" + addComp.city + \", \" + addComp.district + \", \" + addComp.street + \", \" + addComp.streetNumber;\r\n        }\r\n    };\r\n    BaiduMap.prototype.setLocate = function (address) {\r\n        // 创建地址解析器实例\r\n        var myGeo = new BMap.Geocoder();\r\n        var self = this;\r\n        myGeo.getPoint(address, function (point) {\r\n            if (point) {\r\n                self.map.centerAndZoom(point, 11);\r\n                self.marker.setPosition(point);\r\n                myGeo.getLocation(point, function (rs) {\r\n                    self.showLocationInfo(point, rs);\r\n                });\r\n            } else {\r\n                alert(\"地址信息不正确，定位失败\");\r\n            }\r\n        }, '');\r\n    };\r\n\r\n\r\n    function GoogleMap() {\r\n        BaseMap.call(this, \"google\");\r\n        this.infoOpts = {\r\n            width: 250,     //信息窗口宽度\r\n            //   height: 100,     //信息窗口高度\r\n            title: \"\"  //信息窗口标题\r\n        };\r\n    }\r\n\r\n    GoogleMap.prototype = new BaseMap();\r\n    GoogleMap.prototype.constructor = GoogleMap;\r\n    GoogleMap.prototype.isAPIReady = function () {\r\n        return window['google'] && window['google']['maps']\r\n    };\r\n    GoogleMap.prototype.setMap = function () {\r\n        var self = this;\r\n        if (this.isshow || this.ishide) return;\r\n        if (!this.loadAPI()) return;\r\n\r\n        //说明地图已切换\r\n        if (this.mapbox.length < 1) return;\r\n\r\n        var map = self.map = new google.maps.Map(this.mapbox[0], {\r\n            zoom: 15,\r\n            draggable: true,\r\n            scaleControl: true,\r\n            streetViewControl: true,\r\n            zoomControl: true\r\n        });\r\n\r\n        //获取经纬度坐标值\r\n        var point = this.objectToPoint(this.locate);\r\n        map.panTo(point);\r\n        this.marker = new google.maps.Marker({position: point, map: map, draggable: true});\r\n\r\n\r\n        var gc = new google.maps.Geocoder();\r\n\r\n        this.marker.addListener(\"dragend\", function () {\r\n            point = self.marker.getPosition();\r\n            gc.geocode({'location': point}, function (rs) {\r\n                self.showLocationInfo(point, rs);\r\n            });\r\n        });\r\n\r\n        //添加标记点击监听\r\n        this.marker.addListener(\"click\", function () {\r\n            point = self.marker.getPosition();\r\n            gc.geocode({'location': point}, function (rs) {\r\n                self.showLocationInfo(point, rs);\r\n            });\r\n        });\r\n\r\n        gc.geocode({'location': point}, function (rs) {\r\n            self.showLocationInfo(point, rs);\r\n        });\r\n        this.infoWindow = new google.maps.InfoWindow({map: map});\r\n        this.infoWindow.setPosition(point);\r\n\r\n        this.isshow = true;\r\n        if (this.toshow) {\r\n            this.showInfo();\r\n            this.toshow = false;\r\n        }\r\n    };\r\n\r\n    GoogleMap.prototype.pointToObject = function (point) {\r\n        return {\r\n            lng:point.lng,\r\n            lat:point.lat\r\n        };\r\n    };\r\n    GoogleMap.prototype.objectToPoint = function (object) {\r\n        return new google.maps.LatLng(parseFloat(object.lat),parseFloat(object.lng));\r\n    };\r\n    GoogleMap.prototype.getCenter = function () {\r\n        var center=this.map.getCenter();\r\n        return this.pointToObject(center);\r\n    };\r\n\r\n    GoogleMap.prototype.showInfo = function (point) {\r\n        if (this.ishide) return;\r\n        if (!this.isshow) {\r\n            this.toshow = true;\r\n            return;\r\n        }\r\n        if(point){\r\n            this.locate=point;\r\n            this.marker.setPosition(this.objectToPoint(point));\r\n        }\r\n        this.infoWindow.setOptions({position: this.marker.getPosition()});\r\n        this.setInfoContent();\r\n\r\n    };\r\n    GoogleMap.prototype.getAddress = function (rs, status) {\r\n        if (rs && rs[0]) {\r\n            return rs[0].formatted_address;\r\n        }\r\n    };\r\n    GoogleMap.prototype.setLocate = function (address) {\r\n        // 创建地址解析器实例\r\n        var myGeo = new google.maps.Geocoder();\r\n        var self = this;\r\n        myGeo.getPoint(address, function (point) {\r\n            if (point) {\r\n                self.map.centerAndZoom(point, 11);\r\n                self.marker.setPosition(point);\r\n                myGeo.getLocation(point, function (rs) {\r\n                    self.showLocationInfo(point, rs);\r\n                });\r\n            } else {\r\n                alert(\"地址信息不正确，定位失败\");\r\n            }\r\n        }, '');\r\n    };\r\n\r\n    function TencentMap() {\r\n        BaseMap.call(this, \"tencent\");\r\n    }\r\n\r\n    TencentMap.prototype = new BaseMap();\r\n    TencentMap.prototype.constructor = TencentMap;\r\n    TencentMap.prototype.isAPIReady = function () {\r\n        return window['qq'] && window['qq']['maps'];\r\n    };\r\n    TencentMap.prototype.pointToObject = function (point) {\r\n        return {\r\n            lng:point.getLng(),\r\n            lat:point.getLat()\r\n        };\r\n    };\r\n    TencentMap.prototype.objectToPoint = function (object) {\r\n        return new qq.maps.LatLng(parseFloat(object.lat),parseFloat(object.lng));\r\n    };\r\n    TencentMap.prototype.setMap = function () {\r\n        var self = this;\r\n        if (this.isshow || this.ishide) return;\r\n        if (!this.loadAPI()) return;\r\n\r\n\r\n        //初始化地图\r\n        var map = self.map = new qq.maps.Map(this.mapbox[0], {zoom: 15});\r\n        //初始化地图控件\r\n        new qq.maps.ScaleControl({\r\n            align: qq.maps.ALIGN.BOTTOM_LEFT,\r\n            margin: qq.maps.Size(85, 15),\r\n            map: map\r\n        });\r\n        //map.addControl(new BMap.OverviewMapControl());\r\n        //map.enableScrollWheelZoom();\r\n\r\n        //获取经纬度坐标值\r\n        var point = this.objectToPoint(this.locate);\r\n        map.panTo(point); //初始化地图中心点\r\n\r\n        //初始化地图标记\r\n        this.marker = new qq.maps.Marker({\r\n            position: point,\r\n            draggable: true,\r\n            map: map\r\n        });\r\n        this.marker.setAnimation(qq.maps.MarkerAnimation.DOWN);\r\n\r\n        //地址解析类\r\n        var gc = new qq.maps.Geocoder({\r\n            complete: function (rs) {\r\n                self.showLocationInfo(point, rs);\r\n            }\r\n        });\r\n\r\n        qq.maps.event.addListener(this.marker, 'click', function () {\r\n            point = self.marker.getPosition();\r\n            gc.getAddress(point);\r\n        });\r\n        //设置Marker停止拖动事件\r\n        qq.maps.event.addListener(this.marker, 'dragend', function () {\r\n            point = self.marker.getPosition();\r\n            gc.getAddress(point);\r\n        });\r\n\r\n        gc.getAddress(point);\r\n\r\n        this.infoWindow = new qq.maps.InfoWindow({map: map});\r\n\r\n        this.isshow = true;\r\n        if (this.toshow) {\r\n            this.showInfo();\r\n            this.toshow = false;\r\n        }\r\n    };\r\n\r\n    TencentMap.prototype.getCenter = function () {\r\n        var center=this.map.getCenter();\r\n        return this.pointToObject(center);\r\n    };\r\n\r\n    TencentMap.prototype.showInfo = function (point) {\r\n        if (this.ishide) return;\r\n        if (!this.isshow) {\r\n            this.toshow = true;\r\n            return;\r\n        }\r\n        if(point){\r\n            this.locate=point;\r\n            this.marker.setPosition(this.objectToPoint(point));\r\n        }\r\n        this.infoWindow.setPosition(this.marker.getPosition());\r\n        this.infoWindow.open();\r\n        this.setInfoContent();\r\n    };\r\n\r\n    TencentMap.prototype.getAddress = function (rs) {\r\n        if(rs && rs.detail) {\r\n            return rs.detail.address;\r\n        }\r\n    };\r\n\r\n    TencentMap.prototype.setLocate = function (address) {\r\n        // 创建地址解析器实例\r\n        var self = this;\r\n        var myGeo = new qq.maps.Geocoder({\r\n            complete: function (result) {\r\n                if(result && result.detail && result.detail.location){\r\n                    var point=result.detail.location;\r\n                    self.map.setCenter(point);\r\n                    self.marker.setPosition(point);\r\n                    self.showLocationInfo(point, result);\r\n                }else{\r\n                    alert(\"地址信息不正确，定位失败\");\r\n                }\r\n            },\r\n            error:function(result){\r\n                alert(\"地址信息不正确，定位失败\");\r\n            }\r\n        });\r\n        myGeo.getLocation(address);\r\n    };\r\n\r\n\r\n    function GaodeMap() {\r\n        BaseMap.call(this, \"gaode\");\r\n        this.infoOpts = {\r\n            width: 250,     //信息窗口宽度\r\n            //   height: 100,     //信息窗口高度\r\n            title: \"\"  //信息窗口标题\r\n        };\r\n    }\r\n\r\n    GaodeMap.prototype = new BaseMap();\r\n    GaodeMap.prototype.constructor = GaodeMap;\r\n    GaodeMap.prototype.isAPIReady = function () {\r\n        return !!window['AMap']\r\n    };\r\n\r\n    GaodeMap.prototype.setMap = function () {\r\n        var self = this;\r\n        if (this.isshow || this.ishide) return;\r\n        if (!this.loadAPI()) return;\r\n\r\n\r\n        var map = self.map = new AMap.Map(this.mapbox.attr('id'), {\r\n            resizeEnable: true,\r\n            dragEnable: true,\r\n            zoom: 13\r\n        });\r\n        map.plugin([\"AMap.ToolBar\", \"AMap.Scale\", \"AMap.OverView\"], function () {\r\n            map.addControl(new AMap.ToolBar());\r\n            map.addControl(new AMap.Scale());\r\n            map.addControl(new AMap.OverView());\r\n        });\r\n\r\n        $('[name=txtLang]').unbind().on('change', function () {\r\n            var lang = $(this).val();\r\n            if (lang) map.setLang(lang);\r\n        }).trigger('change');\r\n\r\n\r\n        //获取经纬度坐标值\r\n        var point = this.objectToPoint(this.locate);\r\n        map.setCenter(point);\r\n\r\n        this.marker = new AMap.Marker({position: point, map: map}); //初始化地图标记\r\n        this.marker.setDraggable(true); //标记开启拖拽\r\n\r\n\r\n        this.infoWindow = new AMap.InfoWindow();\r\n        this.infoWindow.open(map, point);\r\n\r\n        map.plugin([\"AMap.Geocoder\"], function () {\r\n            var gc = new AMap.Geocoder(); //地址解析类\r\n            //添加标记拖拽监听\r\n            self.marker.on(\"dragend\", function (e) {\r\n                //获取地址信息\r\n                gc.getAddress(e.lnglat, function (st, rs) {\r\n                    self.showLocationInfo(e.lnglat, rs);\r\n                });\r\n            });\r\n\r\n            //添加标记点击监听\r\n            self.marker.on(\"click\", function (e) {\r\n                gc.getAddress(e.lnglat, function (st, rs) {\r\n                    self.showLocationInfo(e.lnglat, rs);\r\n                });\r\n            });\r\n\r\n            gc.getAddress(point, function (st, rs) {\r\n                self.showLocationInfo(point, rs);\r\n            });\r\n        });\r\n\r\n        this.isshow = true;\r\n        if (this.toshow) {\r\n            this.showInfo();\r\n            this.toshow = false;\r\n        }\r\n    };\r\n    GaodeMap.prototype.pointToObject = function (point) {\r\n        return {\r\n            lng:point.getLng(),\r\n            lat:point.getLat()\r\n        };\r\n    };\r\n    GaodeMap.prototype.objectToPoint = function (object) {\r\n        return new AMap.LngLat(object.lng, object.lat);\r\n    };\r\n    GaodeMap.prototype.getCenter = function () {\r\n        var center=this.map.center();\r\n        return this.pointToObject(center);\r\n    };\r\n\r\n    GaodeMap.prototype.showInfo = function (point) {\r\n        if (this.ishide) return;\r\n        if (!this.isshow) {\r\n            this.toshow = true;\r\n            return;\r\n        }\r\n        if(point){\r\n            this.marker.setPosition(this.objectToPoint(point));\r\n        }\r\n        this.setInfoContent();\r\n        this.infoWindow.setPosition(this.marker.getPosition());\r\n    };\r\n\r\n    GaodeMap.prototype.getAddress = function (rs) {\r\n        return rs.regeocode.formattedAddress;\r\n    };\r\n\r\n    GaodeMap.prototype.setLocate = function (address) {\r\n        // 创建地址解析器实例\r\n        var myGeo = new AMap.Geocoder();\r\n        var self = this;\r\n        myGeo.getPoint(address, function (point) {\r\n            if (point) {\r\n                self.map.centerAndZoom(point, 11);\r\n                self.marker.setPosition(point);\r\n                myGeo.getLocation(point, function (rs) {\r\n                    self.showLocationInfo(point, rs);\r\n                });\r\n            } else {\r\n                alert(\"地址信息不正确，定位失败\");\r\n            }\r\n        }, '');\r\n    };\r\n\r\n    window.InitMap=InitMap;\r\n})(window,jQuery);"]}