"use strict";function del(t,n){return dialog.confirm(n,function(){location.href=$(t).attr("href")}),!1}function lang(t){return window.language&&window.language[t]?window.language[t]:t}function randomString(t,n){for(var e="",o=(n=n||"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789").length,i=0;i<t;i++){var r=Math.floor(Math.random()*o);e+=n.substring(r,r+1)}return e}function copy_obj(t){return JSON.parse(JSON.stringify(t))}function isObjectValueEqual(t,n){if(!t&&!n)return!0;if(!t||!n)return!1;var e=Object.getOwnPropertyNames(t),o=Object.getOwnPropertyNames(n);if(e.length!=o.length)return!1;for(var i=0;i<e.length;i++){var r=e[i];if(t[r]!==n[r])return!1}return!0}function array_combine(t,n){for(var e={},o=0;o<t.length&&!(n.length<o+1);o++)e[t[o]]=n[o];return e}function tostring(t){return t&&t.toString?t.toString():""}function callfunc(t,n,e,o){if(e){"string"==typeof e&&(e=e.split(","));var i=e.indexOf("###");0<=i?e[i]=t:e=[t].concat(e)}else e=[t];return window[n]?window[n].apply(o,e):null==t?"":t}function html_encode(t){if(!t)return t;var n=document.createElement("div");null!=n.textContent?n.textContent=t:n.innerText=t;var e=n.innerHTML;return n=null,e}function html_decode(t){if(!t)return t;var n=document.createElement("div");n.innerHTML=t;var e=n.innerText||n.textContent;return n=null,e}function pad_zero(t,n){return(t+="").length<n?new Array(++n-t.length).join("0")+t:t}function timestamp_date(t,n){if(!t)return"";var i=new Date(1e3*t),e=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],o={1:"st",2:"nd",3:"rd",21:"st",22:"nd",23:"rd",31:"st"},r=["","January","February","March","April","May","June","July","August","September","October","November","December"],s={d:function(){return pad_zero(s.j(),2)},D:function(){return s.l().substr(0,3)},j:function(){return i.getDate()},l:function(){return e[s.w()]},N:function(){return s.w()+1},S:function(){return o[s.j()]?o[s.j()]:"th"},w:function(){return i.getDay()},z:function(){return(i-new Date(i.getFullYear()+"/1/1"))/864e5>>0},W:function(){var t,n=s.z(),e=364+s.L()-n,o=(new Date(i.getFullYear()+"/1/1").getDay()||7)-1;return e<=2&&(i.getDay()||7)-1<=2-e?1:n<=2&&4<=o&&6-o<=n?(t=new Date(i.getFullYear()-1+"/12/31"),timestamp_date(Math.round(t.getTime()/1e3),"W")):1+(o<=3?(n+o)/7:(n-(7-o))/7)>>0},F:function(){return r[s.n()]},m:function(){return pad_zero(s.n(),2)},M:function(){return s.F().substr(0,3)},n:function(){return i.getMonth()+1},t:function(){var t;return 2==(t=i.getMonth()+1)?28+s.L():1&t&&t<8||!(1&t)&&7<t?31:30},L:function(){var t=s.Y();return 3&t||!(t%100)&&t%400?0:1},Y:function(){return i.getFullYear()},y:function(){return(i.getFullYear()+"").slice(2)},a:function(){return 11<i.getHours()?"pm":"am"},A:function(){return s.a().toUpperCase()},B:function(){var t=60*(i.getTimezoneOffset()+60),n=3600*i.getHours()+60*i.getMinutes()+i.getSeconds()+t,e=Math.floor(n/86.4);return 1e3<e&&(e-=1e3),e<0&&(e+=1e3),1==String(e).length&&(e="00"+e),2==String(e).length&&(e="0"+e),e},g:function(){return i.getHours()%12||12},G:function(){return i.getHours()},h:function(){return pad_zero(s.g(),2)},H:function(){return pad_zero(i.getHours(),2)},i:function(){return pad_zero(i.getMinutes(),2)},s:function(){return pad_zero(i.getSeconds(),2)},O:function(){var t=pad_zero(Math.abs(i.getTimezoneOffset()/60*100),4);return t=0<i.getTimezoneOffset()?"-"+t:"+"+t},P:function(){var t=s.O();return t.substr(0,3)+":"+t.substr(3,2)},c:function(){return s.Y()+"-"+s.m()+"-"+s.d()+"T"+s.h()+":"+s.i()+":"+s.s()+s.P()},U:function(){return Math.round(i.getTime()/1e3)}};return(n=n||"Y-m-d H:i:s").replace(/[\\]?([a-zA-Z])/g,function(t,n){return t!=n?n:s[n]?s[n]():n})}function iif(t,n,e){return"0"===t&&(t=0),t?n:e}Number.prototype.format=function(t){void 0===t&&(t=2);for(var n=this.toFixed(t).split("."),e=[],o=n[0].split(""),i=o.length,r=0;r<i;r++)0<r&&r%3==0&&e.unshift(","),e.unshift(o[i-r-1]);return e.join("")+(2==n.length?"."+n[1]:"")},String.prototype.trim||(String.prototype.trim=function(){return this.replace(/(^\s+|\s+$)/g,"")}),String.prototype.compile=function(a,t){if(t){var n=[];for(var e in a)n.push(this.compile(a[e]));return n.join("\n")}return this.replace(/\{if\s+([^\}]+)\}([\W\w]*?){\/if}/g,function(t,n,e){var o,i=e.split("{else}");if(o=n.match(/\s+(=+|<|>)\s+/)){o=o[0];var r=n.split(o);0===r[0].indexOf("@")&&(r[0]=a[r[0].replace("@","")]),0===r[1].indexOf("@")&&(r[1]=a[r[1].replace("@","")]);var s=!1;switch(o=o.trim()){case"==":s=r[0]==r[1];break;case"===":s=r[0]===r[1];break;case">":s=r[0]>r[1];break;case"<":s=r[0]<r[1]}if(s)return e;if(i[1])return i[1]}else{if(a[n.replace("@","")])return i[0];if(i[1])return i[1]}return""}).replace(/\{@([\w\d\.]+)(?:\|([\w\d]+)(?:\s*=\s*([^\}]+))?)?\}/g,function(t,n,e,o){if(0<n.indexOf(".")){for(var i=n.split("."),r=a,s=0;s<i.length;s++){if(void 0===r[i[s]]||null===r[i[s]]){r="";break}r=r[i[s]]}return callfunc(r,e,o)}return callfunc(a[n],e,o,a)})},window.default=function(t,n){return t||n},function(t,b){var a='<div class="modal fade" id="{@id}" tabindex="-1" role="dialog" aria-labelledby="{@id}Label" aria-hidden="true">\n    <div class="modal-dialog">\n        <div class="modal-content">\n            <div class="modal-header">\n                <h4 class="modal-title" id="{@id}Label"></h4>\n                <button type="button" class="close" data-dismiss="modal">\n                    <span aria-hidden="true">&times;</span>\n                    <span class="sr-only">Close</span>\n                </button>\n            </div>\n            <div class="modal-body">\n            </div>\n            <div class="modal-footer">\n                <nav class="nav nav-fill"></nav>\n            </div>\n        </div>\n    </div>\n</div>',e=0;function g(t){if((t=t||{}).btns){if("string"==typeof t.btns)t.btns=[{text:t.btns}];else if(t.btns instanceof Array)for(var n=0;n<t.btns.length;n++)"string"==typeof t.btns[n]&&(t.btns[n]={text:t.btns[n]}),t.btns[n].isdefault&&(t.defaultBtn=n);else console.error("Dialog::construct argument btns error."),t.btns=[];0<t.btns.length&&(void 0===t.defaultBtn&&(t.defaultBtn=t.btns.length-1,t.btns[t.defaultBtn].isdefault=!0),t.btns[t.defaultBtn]&&!t.btns[t.defaultBtn].type&&(t.btns[t.defaultBtn].type="primary"))}this.options=b.extend({id:"modal_dialog_"+e++,header:!0,footer:!0,backdrop:!0,size:"",btns:[{text:"取消",type:"secondary"},{text:"确定",isdefault:!0,type:"primary"}],defaultBtn:1,contentClass:"",onsure:null,onshow:null,onshown:null,onhide:null,onhidden:null},t),(!this.options.btns||this.options.btns.length<1)&&(this.options.footer=!1),this.closed=!0,this.box=b(this.options.id)}g.prototype.generBtn=function(t,n){return t.type&&(t.class="btn-outline-"+t.type),'<a href="javascript:" class="nav-item btn '+(t.class?t.class:"btn-outline-secondary")+'" data-index="'+n+'">'+t.text+"</a>"},g.prototype.show=function(t,n){this.box=b("#"+this.options.id),n=n||"系统提示",this.box.length<1?(b(document.body).append(a.replace("modal-body","modal-body"+(this.options.bodyClass?" "+this.options.bodyClass:"")).compile({id:this.options.id})),this.box=b("#"+this.options.id)):this.box.unbind(),this.options.header||this.box.find(".modal-header").remove(),this.options.footer||this.box.find(".modal-footer").remove(),!0!==this.options.backdrop&&(this.box.data("backdrop",this.options.backdrop),!1===this.options.backdrop&&this.box.css({height:0,overflow:"visible"})),this.options.keyboard||this.box.data("keyboard",!1);var e=this;g.instance=e;for(var o=[],i=0;i<this.options.btns.length;i++)o.push(this.generBtn(this.options.btns[i],i));this.box.find(".modal-footer .nav").html(o.join("\n"));var r=this.box.find(".modal-dialog");r.removeClass("modal-sm").removeClass("modal-lg"),"sm"==this.options.size?r.addClass("modal-sm"):"lg"==this.options.size&&r.addClass("modal-lg"),this.options.contentClass&&r.find(".modal-content").addClass(this.options.contentClass),this.box.find(".modal-title").text(n);var s=this.box.find(".modal-body");return s.html(t),this.box.on("hide.bs.modal",function(){e.options.onhide&&e.options.onhide(s,e.box),g.instance=null}),this.box.on("hidden.bs.modal",function(){e.options.onhidden&&e.options.onhidden(s,e.box),e.closed=!0,e.box.remove(),e.box=null}),this.box.on("show.bs.modal",function(){e.options.onshow&&e.options.onshow(s,e.box)}),this.box.on("shown.bs.modal",function(){e.options.onshown&&e.options.onshown(s,e.box)}),this.options.footer&&this.box.find(".modal-footer .btn").click(function(){var t=!0,n=b(this).data("index");e.options.btns[n].click&&(t=e.options.btns[n].click.apply(this,[s,e.box])),n==e.options.defaultBtn&&e.options.onsure&&(t=e.options.onsure.apply(this,[s,e.box])),!1!==t&&e.box.modal("hide")}),this.closed=!1,this.box.modal("show"),this},g.prototype.hide=g.prototype.close=function(){return this.box&&!this.closed&&(this.closed=!0,this.box.modal("hide")),this};var o={error:function(t,n){return this.message(t,"error",n)},success:function(t,n){return this.message(t,"success",n)},warning:function(t,n){return this.message(t,"warning",n)},info:function(t,n){return this.message(t,"info",n)},message:function(t,n,e){var o="bg-info text-white",i="information-circle";if(n)switch(n){case"danger":case"error":i="close-circle",o="bg-danger text-white";break;case"warning":i="warning",o="bg-warning text-white";break;case"success":i="checkmark-circle",o="bg-success text-white"}var r='<div class="dialog-message" ><i class="ion-md-'+i+'"></i>&nbsp;&nbsp;'+t+'<a href="javascript:" class="ion-md-close closebtn"></a></div>',s=new g({footer:!1,header:!1,backdrop:!1,size:"sm",contentClass:o,onshow:function(t){t.find(".closebtn").click(function(){s.close()})}}).show(r,"");return e=e||2,setTimeout(function(){s.close()},1e3*e),s},alert:function(t,n,e){var o=!1,i="function"==typeof n,r="",s="sm",a="";if(void 0===n||i||(e=n),b.isPlainObject(t)){if(t.title&&(r=t.title),void 0!==t.size&&(s=t.size),void 0===t.content)throw"message.content can not be empty.";t=t.content}var l={success:"checkmark-circle",info:"information-circle",warning:"alert",error:"remove-circle"},c="primary";return void 0===e?e="information-circle":l[e]&&(c="error"==e?"danger":e,e=l[e]),a=e?'<div class="row" style="align-items: center;"><div class="col-3 text-right"><i class="ion-md-{@icon} text-{@color}" style="font-size:3em;"></i> </div><div class="col-9" >{@message}</div> </div>'.compile({message:t,icon:e,color:c}):t,new g({btns:"确定",size:s,header:!!r,onsure:function(){if(i)return n(o=!0)},onhide:function(){!o&&i&&n(!1)}}).show(a,r)},confirm:function(t,n,e,o,i){var r=!1;"function"!=typeof n?(o=n,"function"==typeof e?(n=e,e=null):i=e):"function"!=typeof e&&(i=o,o=e),"number"==typeof o&&(i=o,o=void 0);var s="",a="sm",l=[{text:"取消",type:"secondary"},{text:"确定",isdefault:!0,type:"primary"}];if(b.isPlainObject(t)){if(t.title&&(s=t.title),void 0!==t.size&&(a=t.size),void 0!==t.btns&&(l=t.btns),void 0===t.content)throw"message.content can not be empty.";t=t.content}var c={success:"checkmark-circle",info:"information-circle",warning:"alert",error:"remove-circle"},d="primary";o?c[o]&&(d="error"===o?"danger":o,o=c[o]):o="information-circle";var u='<div class="row" style="align-items: center;"><div class="col-3 text-right"><i class="ion-md-{@icon} text-{@color}" style="font-size:3em;"></i> </div><div class="col-9" >{@message}</div> </div>'.compile({message:t,icon:o,color:d}),f=0,p=new g({header:!!s,btns:l,size:a,backdrop:"static",onsure:function(){if(n&&"function"==typeof n)return r=!0,n()},onhide:function(){if(clearInterval(f),!1===r&&"function"==typeof e)return e()}}).show(u,s);if(i&&"number"==typeof i){var h=p.box.find(".modal-footer .btn-outline-primary"),m=p.options.btns[p.options.defaultBtn].text;h.addClass("disabled").text(m+"("+i+")"),f=setInterval(function(){0<--i?h.text(m+"("+i+")"):(h.text(m),h.removeClass("disabled"),clearInterval(f))},1e3)}return p},prompt:function(n,o,t){var i=!1,e='<div class="form-group">{@input}</div>',r="请输入信息",s="";return"string"==typeof n?r=n:(r=n.title,n.content&&(e=-1<n.content.indexOf("{@input}")?n.content:n.content+e),n.default&&(s=n.default)),new g({backdrop:"static",onshow:function(t){n&&n.onshow&&n.onshow(t)},onshown:function(t){t.find("[name=confirm_input]").focus().val(s),n&&n.onshown&&n.onshown(t)},onsure:function(t){var n=t.find("[name=confirm_input]").val();if("function"==typeof o){var e=o(n);return!0===e&&(i=!0),e}},onhide:function(){if(0==i&&"function"==typeof t)return t()}}).show(e.compile({input:'<input type="text" name="confirm_input" class="form-control" />'}),r)},action:function(t,e,n){var o='<div class="list-group"><a href="javascript:" class="list-group-item list-group-item-action">'+t.join('</a><a href="javascript:" class="list-group-item list-group-item-action">')+"</a></div>",i=null,r=new g({bodyClass:"modal-action",backdrop:"static",size:"sm",btns:[{text:"取消",type:"secondary"}],onshow:function(t){(i=t.find(".list-group-item-action")).click(function(t){i.removeClass("active"),b(this).addClass("active");var n=i.index(this);"function"==typeof e?!1!==e(n)&&r.close():r.close()})},onsure:function(){return!0},onhide:function(){return!0}}).show(o,n||"请选择")},pickList:function(s,t,a){"string"==typeof s&&(s={url:s}),s=b.extend({url:"",name:"对象",searchHolder:"根据名称搜索",idkey:"id",onRow:null,extend:null,rowTemplate:'<a href="javascript:" data-id="{@id}" class="list-group-item list-group-item-action">[{@id}]&nbsp;<i class="ion-md-person"></i> {@username}&nbsp;&nbsp;&nbsp;<small><i class="ion-md-phone-portrait"></i> {@mobile}</small></a>'},s||{});var l=null,n="";s.extend&&(n='<select name="'+s.extend.name+'" class="form-control"><option value="">'+s.extend.title+"</option></select>"),a=a||{};new g({backdrop:"static",onshown:function(t){var n=t.find(".searchbtn"),e=t.find(".searchtext"),o=t.find(".list-group"),i=!1,r=null;s.extend&&(r=t.find("[name="+s.extend.name+"]"),b.ajax({url:s.extend.url,type:"GET",dataType:"JSON",success:function(t){r.append(s.extend.htmlRow.compile(t.data,!0))}})),n.click(function(){i||(i=!0,o.html('<span class="list-loading">加载中...</span>'),a.key=e.val(),s.extend&&(a[s.extend.name]=r.val()),b.ajax({url:s.url,type:"GET",dataType:"JSON",data:a,success:function(e){i=!1,1===e.code?e.data&&e.data.length?(o.html(s.rowTemplate.compile(e.data,!0)),o.find("a.list-group-item").click(function(){for(var t=b(this).data("id"),n=0;n<e.data.length;n++)if(e.data[n][s.idkey]==t){l=e.data[n],o.find("a.list-group-item").removeClass("active"),b(this).addClass("active");break}})):o.html('<span class="list-loading"><i class="ion-md-warning"></i> 没有检索到'+s.name+"</span>"):o.html('<span class="text-danger"><i class="ion-md-warning"></i> 加载失败</span>')}}))}).trigger("click")},onsure:function(){return l?"function"==typeof t?t(l):void 0:(o.warning("没有选择"+s.name+"!"),!1)}}).show('<div class="input-group">'+n+'<input type="text" class="form-control searchtext" name="keyword" placeholder="'+s.searchHolder+'"/><div class="input-group-append"><a class="btn btn-outline-secondary searchbtn"><i class="ion-md-search"></i></a></div></div><div class="list-group list-group-picker mt-2"></div>',"请搜索并选择"+s.name)}};b(document).on("keydown",function(t){if(g.instance){var n=g.instance;13==t.keyCode&&n.box.find(".modal-footer .btn").eq(n.options.defaultBtn).trigger("click")}}),t.Dialog=b.Dialog=g,t.dialog=b.dialog=o}(window,jQuery||Zepto);
//# sourceMappingURL=label.min.js.map
